<template>
  <svg
   id="uuid-d0ac6009-0892-4481-8808-85dc91fdb92c"
   viewBox="0 0 216.22504 215.81738"
   version="1.1"
   :width="size"
   :height="size"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs9">
    <linearGradient
       id="booksy-gradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         :style="`stop-color:${props.color || '#0fa4ae'};stop-opacity:1`" />
      <stop
         offset="100%"
         :style="`stop-color:${props.color ? adjustBrightness(props.color, -20) : '#0c8a94'};stop-opacity:1`" />
    </linearGradient>
  </defs>
  <path
     id="path2"
     d="m 0.19629553,107.75035 c 0,-19.741004 -0.317,-39.489004 0.094,-59.222004 0.371,-17.811 7.40099997,-32.355 23.24500047,-41.7509996 6.241,-3.701 13.105,-5.462 20.283,-6.25899998 4.86,-0.54 9.722,-0.501 14.59,-0.501 35.32,-0.003 70.640004,-0.051 105.960004,0.027 11.529,0.025 22.579,2.14199998 32.147,9.12399998 11.618,8.4779996 17.671,20.0879996 19.158,34.2729996 0.536,5.11 0.488,10.219 0.487,15.335 -0.009,36.123 0.227,72.248004 -0.15,108.367004 -0.19,18.227 -7.635,32.978 -24.004,42.322 -6.148,3.509 -12.893,5.114 -19.899,5.858 -4.358,0.463 -8.714,0.48 -13.079,0.48 -35.572,-0.001 -71.145004,0.047 -106.717004,-0.029 -10.711,-0.023 -21.105,-1.709 -30.327,-7.682 -12.9260005,-8.373 -19.9300005,-20.433 -21.25900047,-35.62 -1.378,-15.746 -0.324,-31.553 -0.563,-47.331 -0.088,-5.795 -0.014,-11.593 -0.014,-17.389 0.016,0 0.031,0 0.047,0 z M 96.081296,91.330346 c -0.01,0 -0.02,0 -0.031,0 0,8.065 0.006,16.131004 -0.006,24.196004 -0.002,1.203 0.031,2.375 1.074,3.209 2.433,1.946 4.984004,3.72 7.752004,5.161 1.569,0.817 2.567,0.331 2.945,-1.416 0.397,-1.834 0.174,-3.681 0.156,-5.525 -0.11,-11.512 11.392,-20.646004 22.35,-17.754004 9.791,2.584004 15.13,11.388004 14.189,23.393004 -0.688,8.765 -8.421,16.202 -17.736,17.121 -7.958,0.785 -15.104,-1.587 -21.866,-5.494 -7.887004,-4.557 -14.902004,-10.345 -22.205004,-15.728 -7.877,-5.806 -16.561,-7.496 -26.016,-4.996 -9.229,2.44 -15.688,8.126 -19.372,16.913 -1.162,2.771 -0.583,3.739 2.355,3.991 1.838,0.158 3.711,-0.075 5.544,0.107 3.024,0.299 4.92,-0.759 6.492,-3.516 3.312,-5.81 9.022,-7.987 15.524,-6.368 3.042,0.757 5.791,2.19 8.428,3.884 6.512,4.184 12.57,9.003 18.928,13.4 8.969004,6.203 18.672004,10.164 29.852004,9.857 19.38,-0.532 32.798,-14.519 32.057,-33.85 -1.032,-26.910004 -28.033,-38.368004 -45.786,-26.839004 -2.223,1.444 -2.681,1.109 -2.694,-1.584 -0.034,-6.973 0.019,-13.947 -0.029,-20.92 -0.026,-3.749 -0.754,-4.436 -4.41,-4.504 -1.345,-0.025 -2.691,-0.025 -4.036004,0.002 -3.035,0.061 -3.449,0.475 -3.454,3.566 -0.013,7.897 -0.004,15.795 -0.004,23.692 z"
     :fill="primaryFill" />
  <path
     id="path4"
     d="m 96.081296,91.330346 c 0,-7.897 -0.009,-15.795 0.004,-23.692 0.005,-3.091 0.419,-3.505 3.454,-3.566 1.345004,-0.027 2.691004,-0.027 4.036004,-0.002 3.656,0.068 4.385,0.755 4.41,4.504 0.048,6.973 -0.004,13.947 0.029,20.92 0.013,2.693 0.47,3.027 2.694,1.584 17.752,-11.529 44.754,-0.071 45.786,26.839004 0.741,19.331 -12.677,33.318 -32.057,33.85 -11.18,0.307 -20.883,-3.654 -29.852004,-9.857 -6.358,-4.397 -12.415,-9.216 -18.928,-13.4 -2.637,-1.694 -5.386,-3.126 -8.428,-3.884 -6.502,-1.619 -12.212,0.558 -15.524,6.368 -1.572,2.757 -3.468,3.815 -6.492,3.516 -1.833,-0.182 -3.706,0.051 -5.544,-0.107 -2.938,-0.253 -3.516,-1.221 -2.355,-3.991 3.684,-8.787 10.143,-14.473 19.372,-16.913 9.455,-2.5 18.139,-0.81 26.016,4.996 7.302,5.383 14.318,11.171 22.205004,15.728 6.761,3.907 13.908,6.28 21.866,5.494 9.315,-0.919 17.049,-8.356 17.736,-17.121 0.942,-12.006 -4.398,-20.81 -14.189,-23.393004 -10.958,-2.892 -22.46,6.242004 -22.35,17.754004 0.018,1.844 0.241,3.691 -0.156,5.525 -0.378,1.747 -1.376,2.233 -2.945,1.416 -2.767,-1.441 -5.319004,-3.215 -7.752004,-5.161 -1.043,-0.834 -1.076,-2.006 -1.074,-3.209 0.012,-8.065 0.006,-16.131004 0.006,-24.196004 0.01,0 0.02,0 0.031,0 z"
     :fill="_textColor" />
</svg>
</template>

<script setup lang="ts">
import { computed } from 'vue'

interface Props {
  size?: number | string
  filled?: boolean
  color?: string
}

const props = withDefaults(defineProps<Props>(), {
  size: 24,
  filled: false,
  color: '#0fa4ae'
})

// تابع برای تشخیص رنگ سفید
const isWhiteColor = (color: string): boolean => {
  if (!color || color === "transparent") return false
  
  // حذف # از ابتدای رنگ hex
  const hex = color.replace("#", "").toLowerCase()
  
  // بررسی اینکه رنگ سفید باشد
  return hex === "ffffff" || hex === "fff" || color.toLowerCase() === "white"
}

// تابع برای تنظیم روشنی رنگ
const adjustBrightness = (color: string, amount: number): string => {
  const hex = color.replace('#', '')
  const r = Math.max(0, Math.min(255, parseInt(hex.substr(0, 2), 16) + amount))
  const g = Math.max(0, Math.min(255, parseInt(hex.substr(2, 2), 16) + amount))
  const b = Math.max(0, Math.min(255, parseInt(hex.substr(4, 2), 16) + amount))
  
  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`
}

// تعیین رنگ متن بر اساس رنگ پس‌زمینه
const _textColor = computed(() => {
  const currentColor = props.color || '#0fa4ae'
  return isWhiteColor(currentColor) ? '#000000' : '#ffffff'
})

// تعیین نوع fill برای path اول
const primaryFill = computed(() => {
  const currentColor = props.color || '#0fa4ae'
  return props.filled && !isWhiteColor(currentColor) ? 'url(#booksy-gradient)' : currentColor
})
</script>