<template>
  <svg
   id="uuid-d9ba29d9-a06a-4526-a4db-6b9871b86844"
   viewBox="0 0 214.30396 223.0488"
   version="1.1"
   :width="size"
   :height="size"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs9">
    <linearGradient
       :id="gradientId"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         :stop-color="lightColor" />
      <stop
         offset="100%"
         :stop-color="darkColor" />
    </linearGradient>
  </defs>
  <!-- پس‌زمینه -->
  <rect
     x="0"
     y="0"
     width="214.30396"
     height="223.0488"
     rx="50"
     ry="50"
     :fill="props.color ? props.color : `url(#${gradientId})`"
     id="background" />
  <!-- لوگوی ایتاا -->
  <path
     id="path2"
     d="m 90.060061,83.290456 c -10.877,3.925 -18.999,18.393004 -15.188,29.446004 0.908,2.632 1.817,5.345 4.126,6.938 3.692,2.549 2.685,4.857 0.503,7.802 -13.709,18.496 -4.402,40.067 10.883,48.414 1.734,-19.857 13.744999,-31.917 30.461999,-40.284 10.957,-5.485 22.013,-10.774 32.992,-16.216 15.675,-7.77 24.458,-20.469004 27.108,-37.693004 1.906,-12.388 1.766,-24.461 -3.397,-36.197 -5.276,-11.992 -13.992,-20.386 -26.001,-25.266 -21.532,-8.75 -41.562,-4.011 -60.765999,7.243 -29.662,17.383 -48.831,43.293 -59.914,75.297004 -6.389,18.451 -8.864,37.685 -3.682,56.874 5.975,22.127 20.244,37.194 41.85,45.13 9.185,3.374 18.842,5.79 28.437,5.647 15.109999,-0.224 29.672999,-3.778 42.852999,-12.004 17.968,-11.214 31.212,-27.012 43.893,-43.53 9.62,-12.531 18.138,-25.924 28.879,-37.639 1.844,1.19 1.023,2.825 1.028,4.129 0.066,17.646 -0.3,35.3 0.131,52.936 0.557,22.766 -14.855,41.096 -35.074,47.003 -4.358,1.273 -9.117,1.614 -13.693,1.629 -38.999,0.122 -77.999999,0.122 -116.998999,0.052 -27.1,-0.048 -48.73400049,-21.304 -48.48900049,-48.133 0.4,-43.647 0.035,-87.300004 0.225,-130.950004 0.097,-22.23 21.91000049,-44.12399967 44.71100049,-43.91699967 41.225,0.374 82.455999,-0.002000001 123.683999,0.155 18.245,0.07 31.213,9.20399997 40.018,24.77299967 4.073,7.202 5.757,14.902 5.609,23.235 -0.276,15.598 -0.099,31.204 -0.058,46.807 0.006,2.245 -0.575,3.714 -2.396,5.476004 -13.953,13.495 -27.388,27.532 -41.471,40.887 -13.013,12.341 -27.984,21.3 -46.315,23.478 -6.046,0.718 -11.806,-0.468 -17.449,-2.16 -3.425,-1.027 -5.02,-1.158 -6.412,2.989 -1.852999,5.522 -2.541999,11.129 -3.513999,16.756 -0.318,1.842 -0.217,4.055 -3.87,2.937 -12.857,-3.934 -21.84,-12.127 -25.476,-24.756 -2.502,-8.691 -5.251,-16.545 -11.26,-23.664 -9.157,-10.849 -7.575,-23.126 -1.206,-34.799 10.191,-18.680004 26.921,-29.177004 46.293999,-36.498004 8.058,-3.045 16.414,-5.017 24.69,-5.037 14.132,-0.034 27.322,3.627 35.749,16.687 2.281,3.534 2.059,6.771 -0.392,10.095 -4.458,6.046 -11.087,8.887 -17.64,11.554 -11.381,4.632004 -23.262,6.817004 -35.647,5.996004 -8.294999,-0.55 -14.646999,-4.597 -16.867999,-11.082004 -1.129,-3.297 -0.498,-6.574 -0.273,-9.872 0.169,-0.352 0.339,-0.703 0.509,-1.054 -0.395,0.128 -0.789,0.256 -1.184,0.384 z"
     :fill="textColor" />
  <path
     id="path4"
     d="m 89.489061,79.535456 c 0.401,-0.13 0.803,-0.261 1.204,-0.391 -0.173,0.357 -0.345,0.714 -0.517,1.072 -0.228,-0.227 -0.457,-0.454 -0.687,-0.681 z"
     :fill="textColor" />
</svg>
</template>

<script setup lang="ts">
import { computed, useId } from 'vue'

interface Props {
  size?: number | string
  filled?: boolean
  color?: string
}

const props = withDefaults(defineProps<Props>(), {
  size: 24,
  filled: false,
  color: ''
})

// تابع برای تشخیص رنگ سفید
const isWhiteColor = (color: string): boolean => {
  if (!color || color === "transparent") return false
  
  // حذف # از ابتدای رنگ hex
  const hex = color.replace("#", "").toLowerCase()
  
  // بررسی اینکه رنگ سفید باشد
  return hex === "ffffff" || hex === "fff" || color.toLowerCase() === "white"
}

// تابع برای تنظیم روشنی رنگ
const adjustBrightness = (hex: string, amount: number): string => {
  // Remove # if present
  const color = hex.replace('#', '')
  
  // Parse r, g, b values
  const num = parseInt(color, 16)
  const r = Math.max(0, Math.min(255, (num >> 16) + amount))
  const g = Math.max(0, Math.min(255, (num >> 8 & 0x00FF) + amount))
  const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount))
  
  return `#${(r << 16 | g << 8 | b).toString(16).padStart(6, '0')}`
}

// Computed properties
const gradientId = useId()

const lightColor = computed(() => {
  const baseColor = props.color || '#ec7e25'
  return adjustBrightness(baseColor, 40)
})

const darkColor = computed(() => {
  const baseColor = props.color || '#ec7e25'
  return adjustBrightness(baseColor, -20)
})

const primaryFill = computed(() => {
  // اگر کاربر رنگ انتخاب کرده، از اون رنگ استفاده کن
  if (props.color) {
    return props.color
  }
  // اگر رنگ انتخاب نکرده، از گرادیت پیش‌فرض استفاده کن
  return `url(#${gradientId})`
})

// تعیین رنگ متن بر اساس رنگ پس‌زمینه
const textColor = computed(() => {
  if (!props.color) return '#ffffff' // رنگ پیش‌فرض سفید
  return isWhiteColor(props.color) ? '#000000' : '#ffffff'
})
</script>