import{_ as We}from"./DUksgA9l.js";import{y as Ke,r as u,d as _,a as je,j as Qe,n as Ee,k as a,x as i,q as t,p as r,F as ee,l as I,Q as b,u as x,N as j,V as E,M as z,v as te,R as ue,I as de,H as He}from"./Ct89Yiyn.js";import{u as Ge,_ as Je,a as Xe,b as Ye,c as Ze}from"./DcqXlS2i.js";import{s as O,a as _e,b as et,u as tt,c as rt}from"#entry";import{I as ot}from"./DGzIcDwE.js";import{useUserStore as lt}from"./BRBG3GYJ.js";import{d as Pe,c as De}from"./Cr5Iw68y.js";import{u as st}from"./lVmvsOkf.js";import{_ as nt}from"./DlAUqK2U.js";import"./CU4qPF7-.js";import"./ngrFHoWO.js";const it={class:"h-screen bg-background transition-colors duration-300 relative overflow-hidden flex flex-col"},at={class:"flex-shrink-0 bg-background border-b border-border"},ut={class:"flex items-center h-14 px-4"},dt={class:"flex-1 flex items-center justify-center overflow-hidden"},ft={class:"w-full max-w-md px-4"},pt={class:"relative w-full mb-4"},mt={class:"flex items-center justify-between"},ct={class:"flex items-center gap-2"},gt=["src","alt"],xt={class:"text-foreground"},vt={class:"relative w-full mb-6"},bt={class:"absolute top-1/2 -translate-y-1/2 left-3 text-muted-foreground text-sm font-medium pointer-events-none border-r border-border pr-2 mr-2 min-w-[40px] text-left flex items-center h-8",dir:"ltr"},yt={key:0,class:"text-red-500 text-xs mt-1 block"},wt=["disabled"],ht={class:"flex-shrink-0 bg-background border-b border-border"},kt={class:"flex items-center h-14 px-4"},Ct={class:"flex-1 flex items-center justify-center overflow-hidden"},It={class:"w-full max-w-md px-4"},jt={class:"w-full mb-6 relative"},Et={key:0,class:"text-red-500 text-xs mt-1 block"},Pt={class:"flex-shrink-0 bg-background border-b border-border"},Dt={class:"flex items-center h-14 px-4"},Tt={key:0,class:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center"},$t={class:"flex-1 flex items-center justify-center overflow-hidden"},St={class:"w-full max-w-md px-4"},Vt={key:0,class:"text-sm text-muted-foreground text-center mb-4"},Ot={key:1,class:"text-sm text-muted-foreground text-center mb-4"},Ut=["id","value","autofocus","onInput","onKeydown"],Nt={class:"timer center flex justify-center py-4 text-sm"},Rt={key:0,class:"text-right"},At={class:"font-bold inline-block text-foreground",dir:"ltr"},zt={class:"flex-shrink-0 bg-background border-b border-border"},Lt={class:"flex items-center h-14 px-4"},qt={class:"flex-1 flex items-center justify-center overflow-hidden"},Bt={class:"w-full max-w-md px-4"},Ft={class:"relative w-full mb-4"},Mt={class:"relative w-full mb-6"},Wt={class:"flex-shrink-0 bg-background border-b border-border"},Kt={class:"flex items-center h-14 px-4"},Qt={class:"flex-1 flex items-center justify-center overflow-hidden"},Ht={class:"w-full max-w-md px-4"},Gt={class:"relative w-full mb-4"},Jt={key:0,class:"text-red-500 text-xs mt-1 block"},Xt={class:"relative w-full mb-4"},Yt={class:"flex gap-2 flex-row-reverse"},Zt=["src","alt"],_t={class:"text-sm text-foreground",dir:"ltr"},er={class:"flex-1 relative"},tr={key:0,class:"text-red-500 text-xs mt-1 block"},rr={class:"relative w-full mb-6"},or=["disabled"],lr={key:5,class:"text-xl font-bold text-center text-green-600 flex items-center justify-center gap-2"},sr={class:"px-4 pb-4"},nr={class:"relative mb-4"},ir={class:"max-h-[50vh] overflow-y-auto space-y-1"},ar=["onClick","disabled"],ur=["src","alt"],dr={class:"flex-1 text-right"},fr={class:"text-foreground font-medium"},pr={class:"text-xs text-muted-foreground"},mr={class:"text-muted-foreground text-sm",dir:"ltr"},cr={key:0,class:"ti ti-check text-primary"},gr={key:1,class:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded"},xr={class:"px-4 pb-4"},vr={class:"relative mb-4"},br={class:"max-h-[50vh] overflow-y-auto space-y-1"},yr=["onClick"],wr=["src","alt"],hr={class:"flex-1 text-right"},kr={class:"text-foreground font-medium"},Cr={class:"text-xs text-muted-foreground"},Ir={class:"text-muted-foreground text-sm",dir:"ltr"},jr={key:0,class:"ti ti-check text-primary"},Er={class:"px-6 py-4 pb-6"},Pr={class:"space-y-2"},Dr={key:0,class:"ti ti-check text-primary text-2xl"},fe=4,Tr=Ke({__name:"AuthPage",setup(Te){const{isPlatformAuthenticatorAvailable:re,isLoading:oe,authenticateWithPasskey:le,isPasskeyEnabled:pe}=Ge(),c=u("phone"),k=u("phone"),T=u(""),U=u(""),L=u("");u("");const K=u(""),se=u(""),$e=u("+98"),$=u(Pe),S=u(Pe),Q=u(!1),H=u(!1),P=u(""),me=u(""),q=u(""),D=u(""),ce=u(""),ge=u(""),B=u(!1),G=u("fa");_(()=>document.documentElement.classList.contains("dark"));const xe=_(()=>{if(!P.value)return De;const l=P.value.toLowerCase();return De.filter(e=>e.name.includes(l)||e.nameEn.toLowerCase().includes(l)||e.dialCode.includes(l))});{const l=O.getItem("language");l&&(G.value=l)}const p=je({phone:"",email:"",profilePhone:"",profileName:""}),y=je(Array(fe).fill(null)),ne=u(null),F=u(120),N=u(null),J=u(!1),v=u(!1),R=lt(),A=st(),ie=u(!1),ve=u(""),be=u("ti-alert-triangle"),n=(l,e="ti-lock")=>{ve.value=l,be.value=e,ie.value=!0,setTimeout(()=>ie.value=!1,3e3)},Se=_e(),V=et(),h=Se.$axios,X=tt();function C(l){const e="Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹",s="Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©";return l.replace(/[Û°-Û¹]/g,o=>String(e.indexOf(o))).replace(/[Ù -Ù©]/g,o=>String(s.indexOf(o)))}function Y(l){return l.replace(/[0-9]/g,e=>"Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹"[Number(e)])}function Ve(){y.fill(null),F.value=120,J.value=!1,k.value==="email"?c.value="email":c.value="phone"}function Oe(l){const e=l.target,s=e.selectionStart||0;let o=e.value;const d=C(o).replace(/\D/g,"").slice(0,11);let m="";d.length>0&&(d.startsWith("0")?d.length<=4?m=d:d.length<=7?m=d.slice(0,4)+" "+d.slice(4):m=d.slice(0,4)+" "+d.slice(4,7)+" "+d.slice(7):d.length<=3?m=d:d.length<=6?m=d.slice(0,3)+" "+d.slice(3):m=d.slice(0,3)+" "+d.slice(3,6)+" "+d.slice(6));const w=Y(m);T.value=w,e.value=w;const Ie=C(o.slice(0,s)).replace(/\D/g,"").length;let Z=0,ae=0;for(let W=0;W<w.length;W++){if(w[W].match(/[Û°-Û¹]/)&&(ae++,ae>Ie)){Z=W;break}if(ae===Ie){Z=W+1;break}}Ee(()=>{e.setSelectionRange(Z,Z)})}function Ue(l){return Y(l.toString())}function M(l=120){N.value&&clearInterval(N.value),F.value=l,J.value=!1,N.value=rt(()=>{F.value>0?F.value--:(J.value=!0,N.value&&(clearInterval(N.value),N.value=null))},1e3)}async function Ne(){try{let l=!1;if(k.value==="phone"){const e=C(T.value.trim()).replace(/\D/g,"").replace(/^0/,"");l=await we(e)}else l=await he(U.value.trim());l?(y.fill(null),M()):n("Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}catch{n("Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}}async function ye(){try{const l=await le();if(l.success&&l.userId){const e=O.getItem("passkey_auth_token");if(e){X.setToken(e),O.setItem("auth_token",e),n("ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ Ø¨Ø§ Face ID","ti-check"),await R.fetchUser();const s=A.defaultCard;V.push("/dashboard")}else n("Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ ÛŒØ§ Ø§ÛŒÙ…ÛŒÙ„ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯","ti-alert-triangle")}else n(l.error||"Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯","ti-alert-triangle")}catch{n("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª","ti-alert-triangle")}}async function Re(){const l=C(T.value.trim()).replace(/\D/g,"");if(p.phone="",k.value="phone",!/^0?9\d{9}$/.test(l)){p.phone="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Û°Û¹ Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯ ÛŒØ§ Û¹ Ùˆ Û±Û± Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯";return}const s=l.startsWith("0")?l.slice(1):l;ce.value=Y("98")+s+"+";try{await we(s)?(c.value="otp",M()):p.phone="Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}catch{p.phone="Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}}async function Ae(){const l=U.value.trim();if(p.email="",k.value="email",!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)){p.email="Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯";return}ge.value=l;try{await he(l)?(c.value="otp",M()):p.email="Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}catch{p.email="Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}}async function we(l){try{const e={phone:C(l),countryCode:"+98"};console.log("ðŸ“± Sending OTP to:",e);const s=await h.post("auth/sendOtpCode",e);return s.data&&s.data.success===!0?!0:(n(s.data.message),!1)}catch(e){const s=e.response?.data;if(s?.code==="code_already_valid"&&s?.remaining_seconds||s?.message&&s.message.includes("Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ù‡Ù†ÙˆØ² Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª")){c.value="otp";const o=s?.remaining_seconds?parseInt(s.remaining_seconds):120;return M(o),y.fill(null),!0}return s?.message?n(s.message):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle"),!1}}async function he(l){try{const e={email:l};console.log("ðŸ“§ Sending OTP to email:",e);const s=await h.post("auth/sendEmailOtp",e);return s.data&&s.data.success===!0?!0:(n(s.data.message),!1)}catch(e){const s=e.response?.data;if(s?.code==="code_already_valid"&&s?.remaining_seconds||s?.message&&s.message.includes("Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ù‡Ù†ÙˆØ² Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª")){c.value="otp";const o=s?.remaining_seconds?parseInt(s.remaining_seconds):120;return M(o),y.fill(null),!0}return s?.message?n(s.message):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle"),!1}}const ke=()=>y.every(l=>l!==null&&l!=="");async function ze(l,e){const s=e.key;if(!["Backspace","Tab","ArrowLeft","ArrowRight"].includes(s)&&!/^[0-9]$/.test(s)){e.preventDefault();return}if(s==="Backspace"){y[l]=null,l>0&&ne.value?.children[l-1]?.focus(),e.preventDefault();return}if(/^[0-9]$/.test(s)&&(y[l]=s,e.preventDefault(),l<fe-1&&ne.value?.children[l+1]?.focus(),ke())){if(v.value)return;v.value=!0;try{const o=C(y.join("")),{success:g,userExists:f}=await Ce(o);if(g)if(f)try{await R.fetchUser(),A.defaultCard||await h.post("v1/cards/createDefaultCard",{defaultContactType:k.value==="email"?"email":"phone"}),V.push("/dashboard")}catch(d){console.error("âŒ Error fetching user after login:",d),V.push("/dashboard")}else c.value!=="email_profile"&&(c.value="register"),v.value=!1;else v.value=!1,n("Ú©Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}catch(o){v.value=!1,o.response&&o.response.data.message?n(o.response.data.message):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ù‚Ø±Ø§Ø±ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle")}}}async function Ce(l){try{let e;if(k.value==="phone"){const o={code:l,phone:C(T.value.trim()).replace(/\D/g,"").replace(/^0/,""),countryCode:"+98"};e=await h.post("/auth/verifyOtpCode",o)}else{const o={code:l,email:U.value.trim()};e=await h.post("/auth/verifyEmailOtp",o)}const s=e.data.token;return typeof s=="string"&&s.length>0?(console.log("âœ… Token received from server:",s.substring(0,20)+"..."),X.setToken(s),O.setItem("auth_token",s),console.log("âœ… Token saved to safeStorage and store")):console.error("âŒ No token in response:",e.data),e.status===200?{success:!0,userExists:!0}:e.status===201?{success:!0,userExists:!1}:{success:!1,userExists:!1}}catch(e){const s=e.response?.data?.code||e.response?.data?.data?.code,o=e.response?.data?.message||e.response?.data?.data?.message;return s==="profile_required"?(k.value==="email"?(me.value=l,c.value="email_profile"):(q.value=l,c.value="register"),{success:!0,userExists:!1}):(n(o&&s!=="profile_required"?o:"Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ù‚Ø±Ø§Ø±ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle"),{success:!1,userExists:!1})}}async function Le(){if(p.profilePhone="",p.profileName="",!K.value.trim()){p.profileName="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª",n("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");return}const l=K.value.trim().split(" "),e=l[0]||"",s=l.slice(1).join(" ")||"";let o=null;const g=C(se.value.trim()).replace(/\D/g,"");if(g){const f=S.value.dialCode.replace("+","");if(o=f+g,f==="972"||o.startsWith("972")){p.profilePhone="Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯",n("Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯","ti-alert-triangle");return}}v.value=!0;try{const f={code:me.value,email:U.value.trim(),name:e,family:s,phone:o,referred_code:D.value||null},m=(await h.post("/auth/verifyEmailOtp",f)).data.token;typeof m=="string"&&m.length>0&&(X.setToken(m),O.setItem("auth_token",m)),n(`Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${e}`,"ti-check");try{await R.fetchUser(),A.defaultCard||await h.post("v1/cards/createDefaultCard",{defaultContactType:"email"})}catch(w){console.error("âŒ Error fetching user after profile submission:",w)}V.push("/dashboard")}catch(f){v.value=!1,f.response?.data?.code==="phone_taken"?(p.profilePhone="Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª",n("Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª","ti-alert-triangle")):f.response?.data?.code==="invalid_phone_country"?(p.profilePhone="Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯",n("Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯","ti-alert-triangle")):f.response?.data?.message?n(f.response.data.message,"ti-alert-triangle"):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ù‚Ø±Ø§Ø±ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle")}}async function qe(){if(!L.value.trim()){n("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");return}const l=L.value.trim().split(/\s+/),e=l[0],s=l.slice(1).join(" ")||e;try{if(q.value){const f={code:q.value,phone:C(T.value.trim()).replace(/\D/g,"").replace(/^0/,""),countryCode:"+98",name:e,family:s,referred_code:D.value?.trim()||null};console.log("ðŸ“¤ Sending registration data:",f);const m=(await h.post("/auth/verifyOtpCode",f)).data.token;typeof m=="string"&&m.length>0&&(X.setToken(m),O.setItem("auth_token",m)),n(`Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${e}`,"ti-check");try{await R.fetchUser(),_(()=>A.defaultCard)?.value||await h.post("v1/cards/createDefaultCard",{defaultContactType:"phone"})}catch(w){console.error("âŒ Error fetching user after phone profile:",w)}q.value="",await V.push("/dashboard");return}const o=await h.post("/user/setReferralCode",{name:e,family:s,referred_code:D.value||null});n(`Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${e}`,"ti-check"),await R.fetchUser(),_(()=>A.defaultCard)?.value||await h.post("v1/cards/createDefaultCard",{defaultContactType:k.value==="email"?"email":"phone"}),await V.push("/dashboard")}catch(o){console.error("Register error:",o),console.error("Error response:",o.response?.data);const g=o.response?.data?.message||o.response?.data?.data?.message;if(o.response?.status===429||g?.includes("Ù…Ù†Ù‚Ø¶ÛŒ")){n("Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ù†ÛŒØ¯.","ti-alert-triangle"),c.value="phone",q.value="",L.value="",D.value="";return}n(g||"Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø«Ø¨Øª Ù†Ø§Ù… Ù¾ÛŒØ´ Ø¢Ù…Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}}const Be=l=>{$.value=l,Q.value=!1,P.value=""},Fe=l=>{if(l.dialCode==="+972"){n("Ø§ÛŒÙ† Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯","ti-alert-triangle");return}S.value=l,$e.value=l.dialCode,H.value=!1,P.value=""},Me=async l=>{G.value=l,O.setItem("language",l),document.documentElement.lang=l,document.documentElement.dir="rtl",setTimeout(()=>{B.value=!1},300)};return Qe(async()=>{if(sessionStorage.getItem("auto_biometric_auth")==="true"&&(sessionStorage.removeItem("auto_biometric_auth"),await Ee(),re.value&&pe()&&setTimeout(()=>{ye()},500)),"OTPCredential"in window&&navigator.credentials){const l=new AbortController;navigator.credentials.get({otp:{transport:["sms"]},signal:l.signal}).then(async e=>{if(e&&"code"in e){const o=e.code.split("");o.forEach((f,d)=>{y[d]=f;const m=document.querySelector(`#otp-input-${d}`);m&&(m.value=f,m.dispatchEvent(new Event("input")))});const g=document.querySelector(`#otp-input-${o.length-1}`);if(g&&g.focus(),ke()){if(v.value)return;v.value=!0;try{const f=C(y.join("")),{success:d,userExists:m}=await Ce(f);if(d)if(m){try{await R.fetchUser(),A.defaultCard||await h.post("v1/cards/createDefaultCard",{defaultContactType:k.value==="email"?"email":"phone"})}catch(w){console.error("âŒ Error fetching user after OTP verification:",w)}V.push("/dashboard")}else c.value="register",v.value=!1;else v.value=!1,n("Ú©Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}catch{v.value=!1,n("Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}}}}).catch(e=>{})}}),(l,e)=>{const s=We;return i(),a(b,null,[t("div",it,[c.value==="phone"?(i(),a(b,{key:0},[t("div",at,[t("div",ut,[e[22]||(e[22]=t("h1",{class:"text-lg font-semibold text-foreground mr-2"},"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„",-1)),e[23]||(e[23]=r()),e[24]||(e[24]=t("div",{class:"flex-1"},null,-1)),e[25]||(e[25]=r()),t("button",{onClick:e[0]||(e[0]=o=>B.value=!0),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[21]||(e[21]=[t("i",{class:"ti ti-language text-foreground text-xl"},null,-1)])])])]),e[51]||(e[51]=r()),t("div",dt,[t("div",ft,[e[43]||(e[43]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ù„Ø·ÙØ§Ù‹ Ú©Ø´ÙˆØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ùˆ Ø³Ù¾Ø³ Ø´Ù…Ø§Ø±Ù‡ Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",-1)),e[44]||(e[44]=r()),t("div",pt,[t("button",{onClick:e[1]||(e[1]=o=>Q.value=!0),class:"block px-3 pb-2.5 pt-4 w-full text-sm text-foreground bg-transparent rounded-xl border-2 border-border appearance-none focus:outline-none focus:ring-0 hover:border-primary peer transition-colors duration-200 text-right"},[t("div",mt,[t("div",ct,[t("img",{src:`/flag/${$.value.flag}.svg`,alt:$.value.nameEn,class:"w-6 h-4 object-cover rounded"},null,8,gt),e[26]||(e[26]=r()),t("span",xt,x($.value.name),1)]),e[27]||(e[27]=r()),e[28]||(e[28]=t("i",{class:"ti ti-chevron-down text-muted-foreground"},null,-1))])]),e[29]||(e[29]=r()),e[30]||(e[30]=t("label",{class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 right-2 origin-top-right pointer-events-none"},[t("i",{class:"ti ti-world w-4 h-4 ml-1.5"}),r(),t("span",null,"Ú©Ø´ÙˆØ±")],-1))]),e[45]||(e[45]=r()),t("div",vt,[j(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>T.value=o),onInput:Oe,id:"phoneInput",type:"text",inputmode:"numeric",placeholder:" ",dir:"ltr",class:z(["block px-3 pb-2.5 pt-4 w-full text-sm text-foreground bg-transparent rounded-xl border-2 appearance-none focus:outline-none focus:ring-0 peer transition-colors duration-200 pl-16",p.phone?"border-red-500":"border-border focus:border-primary"])},null,34),[[E,T.value]]),e[32]||(e[32]=r()),t("label",{for:"phoneInput",class:z(["inline-flex items-center absolute text-sm duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 right-2 origin-top-right pointer-events-none",p.phone?"text-red-500":"text-muted-foreground peer-focus:text-primary"])},[...e[31]||(e[31]=[t("i",{class:"ti ti-phone w-4 h-4 ml-1.5"},null,-1),r(),t("span",null,"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„",-1)])],2),e[33]||(e[33]=r()),t("div",bt,x($.value.dialCode),1),e[34]||(e[34]=r()),p.phone?(i(),a("p",yt,x(p.phone),1)):I("",!0)]),e[46]||(e[46]=r()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:Re},[...e[35]||(e[35]=[t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1),r(),t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1),r(),t("span",null,"Ø§Ø¯Ø§Ù…Ù‡",-1)])]),e[47]||(e[47]=r()),e[48]||(e[48]=t("div",{class:"flex items-center gap-3 my-6"},[t("div",{class:"flex-1 h-px bg-border"}),r(),t("span",{class:"text-muted-foreground text-sm"},"ÛŒØ§"),r(),t("div",{class:"flex-1 h-px bg-border"})],-1)),e[49]||(e[49]=r()),te(re)&&te(pe)()?(i(),a("button",{key:0,class:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5 mb-3",onClick:ye,disabled:te(oe)},[te(oe)?(i(),a(b,{key:0},[e[36]||(e[36]=t("div",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin ml-2"},null,-1)),e[37]||(e[37]=r()),e[38]||(e[38]=t("span",null,"Ø¯Ø± Ø­Ø§Ù„ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª...",-1))],64)):(i(),a(b,{key:1},[e[39]||(e[39]=t("i",{class:"ti ti-face-id text-xl ml-2"},null,-1)),e[40]||(e[40]=r()),e[41]||(e[41]=t("span",null,"ÙˆØ±ÙˆØ¯ Ø¨Ø§ Face ID / Touch ID",-1))],64))],8,wt)):I("",!0),e[50]||(e[50]=r()),t("button",{class:"w-full bg-card border border-border text-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:bg-muted hover:-translate-y-0.5",onClick:e[3]||(e[3]=o=>c.value="email")},[...e[42]||(e[42]=[t("i",{class:"ti ti-mail text-xl ml-2"},null,-1),r(),t("span",null,"ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø§ÛŒÙ…ÛŒÙ„",-1)])])])])],64)):c.value==="email"?(i(),a(b,{key:1},[t("div",ht,[t("div",kt,[t("button",{onClick:e[4]||(e[4]=o=>c.value="phone"),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[52]||(e[52]=[t("i",{class:"ti ti-arrow-right rtl:block ltr:hidden text-foreground text-xl"},null,-1),r(),t("i",{class:"ti ti-arrow-left ltr:block rtl:hidden text-foreground text-xl"},null,-1)])]),e[53]||(e[53]=r()),e[54]||(e[54]=t("h1",{class:"text-lg font-semibold text-foreground mr-2"},"Ø§ÛŒÙ…ÛŒÙ„",-1))])]),e[62]||(e[62]=r()),t("div",Ct,[t("div",It,[e[59]||(e[59]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ø¢Ø¯Ø±Ø³ Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",-1)),e[60]||(e[60]=r()),t("div",jt,[j(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>U.value=o),id:"emailInput",type:"email",inputmode:"email",placeholder:" ",dir:"ltr",class:"peer block w-full px-4 py-4 text-sm border border-border rounded-lg focus:outline-none focus:ring-0 focus:border-primary text-foreground bg-card transition-all duration-300"},null,512),[[E,U.value]]),e[55]||(e[55]=r()),e[56]||(e[56]=t("label",{for:"emailInput",class:"absolute rtl:right-4 ltr:left-4 text-sm text-muted-foreground bg-background px-1 z-10 transition-all duration-200 cursor-text top-1/2 -translate-y-1/2 peer-focus:top-1 peer-focus:text-xs peer-focus:-translate-y-1/2 peer-focus:text-primary peer-[:not(:placeholder-shown)]:top-1 peer-[:not(:placeholder-shown)]:text-xs peer-[:not(:placeholder-shown)]:-translate-y-1/2"},`\r
            Ø§ÛŒÙ…ÛŒÙ„\r
          `,-1)),e[57]||(e[57]=r()),p.email?(i(),a("p",Et,x(p.email),1)):I("",!0)]),e[61]||(e[61]=r()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:Ae},[...e[58]||(e[58]=[t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1),r(),t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1),r(),t("span",null,"Ø§Ø¯Ø§Ù…Ù‡",-1)])])])])],64)):c.value==="otp"?(i(),a(b,{key:2},[t("div",Pt,[t("div",Dt,[t("button",{onClick:Ve,class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[63]||(e[63]=[t("i",{class:"ti ti-arrow-right rtl:block ltr:hidden text-foreground text-xl"},null,-1),r(),t("i",{class:"ti ti-arrow-left ltr:block rtl:hidden text-foreground text-xl"},null,-1)])]),e[65]||(e[65]=r()),e[66]||(e[66]=t("h2",{class:"text-lg font-semibold text-foreground mr-2"},"Ú©Ø¯ ØªØ§ÛŒÛŒØ¯",-1)),e[67]||(e[67]=r()),e[68]||(e[68]=t("div",{class:"flex-1"},null,-1)),e[69]||(e[69]=r()),t("button",{onClick:e[6]||(e[6]=o=>B.value=!0),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[64]||(e[64]=[t("i",{class:"ti ti-language text-foreground text-xl"},null,-1)])])])]),e[75]||(e[75]=r()),v.value?(i(),a("div",Tt,[...e[70]||(e[70]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),r(),t("p",{class:"text-foreground font-medium"},"Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...")],-1)])])):I("",!0),e[76]||(e[76]=r()),t("div",$t,[t("div",St,[k.value==="phone"?(i(),a("p",Vt,`Ù„Ø·ÙØ§ Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„\r
              `+x(Y(ce.value))+` Ø±Ø§ ÙˆØ§Ø±Ø¯\r
              Ú©Ù†ÛŒØ¯`,1)):(i(),a("p",Ot,`Ù„Ø·ÙØ§ Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„\r
              `+x(ge.value)+` Ø±Ø§ ÙˆØ§Ø±Ø¯\r
              Ú©Ù†ÛŒØ¯`,1)),e[73]||(e[73]=r()),t("div",{ref_key:"otpCont",ref:ne,class:"flex justify-center gap-2 mt-6 ltr"},[(i(),a(b,null,ue(fe,(o,g)=>t("input",{key:g,id:`otp-input-${g}`,type:"text",class:z(["p-4 w-14 h-14 border border-border rounded-lg bg-card text-center text-xl text-foreground flex items-center justify-center font-semibold ltr focus:outline-none focus:border-primary focus:bg-background transition-all duration-300",{bounce:y[g]!==null}]),value:y[g],maxlength:"1",placeholder:"-",inputmode:"numeric",autocomplete:"one-time-code",autofocus:g===0,onInput:f=>y[g]=f.target?.value||null,onKeydown:f=>ze(g,f)},null,42,Ut)),64))],512),e[74]||(e[74]=r()),t("div",Nt,[J.value?(i(),a("button",{key:1,class:"text-primary underline hover:opacity-80 transition-opacity",onClick:Ne},`\r
              Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø¯\r
            `)):(i(),a("div",Rt,[t("span",At,x(Ue(F.value)),1),e[71]||(e[71]=r()),e[72]||(e[72]=t("strong",{class:"mr-2 text-muted-foreground"},"Ø«Ø§Ù†ÛŒÙ‡ Ù…Ø§Ù†Ø¯Ù‡ ØªØ§ Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø¯",-1))]))])])])],64)):c.value==="register"?(i(),a(b,{key:3},[t("div",zt,[t("div",Lt,[t("button",{onClick:e[7]||(e[7]=o=>c.value="otp"),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[77]||(e[77]=[t("i",{class:"ti ti-arrow-right rtl:block ltr:hidden text-foreground text-xl"},null,-1),r(),t("i",{class:"ti ti-arrow-left ltr:block rtl:hidden text-foreground text-xl"},null,-1)])]),e[78]||(e[78]=r()),e[79]||(e[79]=t("h1",{class:"text-lg font-semibold text-foreground mr-2"},"Ø«Ø¨Øª Ù†Ø§Ù…",-1))])]),e[89]||(e[89]=r()),t("div",qt,[t("div",Bt,[e[85]||(e[85]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯",-1)),e[86]||(e[86]=r()),t("div",Ft,[j(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>L.value=o),id:"nameInput",type:"text",placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,L.value]]),e[80]||(e[80]=r()),e[81]||(e[81]=t("label",{for:"nameInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-user w-4 h-4 ml-1.5"}),r(),t("span",null,"Ù†Ø§Ù… Ú©Ø§Ù…Ù„")],-1))]),e[87]||(e[87]=r()),t("div",Mt,[j(t("input",{type:"text",id:"referralInput","onUpdate:modelValue":e[9]||(e[9]=o=>D.value=o),placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,D.value]]),e[82]||(e[82]=r()),e[83]||(e[83]=t("label",{for:"referralInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-gift w-4 h-4 ml-1.5"}),r(),t("span",null,"Ú©Ø¯ Ù…Ø¹Ø±Ù (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)")],-1))]),e[88]||(e[88]=r()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:qe},[...e[84]||(e[84]=[t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1),r(),t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1),r(),t("span",null,"Ø«Ø¨Øª Ùˆ ÙˆØ±ÙˆØ¯",-1)])])])])],64)):c.value==="email_profile"?(i(),a(b,{key:4},[t("div",Wt,[t("div",Kt,[t("button",{onClick:e[10]||(e[10]=o=>c.value="otp"),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[90]||(e[90]=[t("i",{class:"ti ti-arrow-right rtl:block ltr:hidden text-foreground text-xl"},null,-1),r(),t("i",{class:"ti ti-arrow-left ltr:block rtl:hidden text-foreground text-xl"},null,-1)])]),e[91]||(e[91]=r()),e[92]||(e[92]=t("h1",{class:"text-lg font-semibold text-foreground mr-2"},"ØªÚ©Ù…ÛŒÙ„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª",-1))])]),e[118]||(e[118]=r()),t("div",Qt,[t("div",Ht,[e[113]||(e[113]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯",-1)),e[114]||(e[114]=r()),t("div",Gt,[j(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>K.value=o),id:"profileFullNameInput",type:"text",placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,K.value]]),e[93]||(e[93]=r()),e[94]||(e[94]=t("label",{for:"profileFullNameInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-user w-4 h-4 ml-1.5"}),r(),t("span",null,"Ù†Ø§Ù… Ú©Ø§Ù…Ù„")],-1)),e[95]||(e[95]=r()),p.profileName?(i(),a("p",Jt,x(p.profileName),1)):I("",!0)]),e[115]||(e[115]=r()),t("div",Xt,[t("div",Yt,[t("button",{onClick:e[12]||(e[12]=o=>H.value=!0),class:"flex items-center gap-2 px-3 py-4 border-2 border-border rounded-xl bg-transparent hover:border-primary transition-all duration-300"},[t("img",{src:`/flag/${S.value.flag}.svg`,alt:S.value.nameEn,class:"w-6 h-4 object-cover rounded"},null,8,Zt),e[96]||(e[96]=r()),t("span",_t,x(S.value.dialCode),1),e[97]||(e[97]=r()),e[98]||(e[98]=t("i",{class:"ti ti-chevron-down text-muted-foreground text-sm"},null,-1))]),e[101]||(e[101]=r()),t("div",er,[j(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>se.value=o),id:"profilePhoneInput",type:"text",inputmode:"numeric",placeholder:" ",dir:"ltr",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300 text-left"},null,512),[[E,se.value]]),e[99]||(e[99]=r()),e[100]||(e[100]=t("label",{for:"profilePhoneInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-phone w-4 h-4 ml-1.5"}),r(),t("span",null,"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)")],-1))])]),e[102]||(e[102]=r()),p.profilePhone?(i(),a("p",tr,x(p.profilePhone),1)):I("",!0)]),e[116]||(e[116]=r()),t("div",rr,[j(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>D.value=o),id:"profileReferralInput",type:"text",placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,D.value]]),e[103]||(e[103]=r()),e[104]||(e[104]=t("label",{for:"profileReferralInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-gift w-4 h-4 ml-1.5"}),r(),t("span",null,"Ú©Ø¯ Ù…Ø¹Ø±Ù (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)")],-1))]),e[117]||(e[117]=r()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:Le,disabled:v.value},[v.value?(i(),a(b,{key:0},[e[105]||(e[105]=t("div",{class:"w-5 h-5 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin ml-2"},null,-1)),e[106]||(e[106]=r()),e[107]||(e[107]=t("span",null,"Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...",-1))],64)):(i(),a(b,{key:1},[e[108]||(e[108]=t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1)),e[109]||(e[109]=r()),e[110]||(e[110]=t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1)),e[111]||(e[111]=r()),e[112]||(e[112]=t("span",null,"Ø«Ø¨Øª Ùˆ ÙˆØ±ÙˆØ¯",-1))],64))],8,or)])])],64)):c.value==="done"?(i(),a("h2",lr,[...e[119]||(e[119]=[t("i",{class:"ti ti-check"},null,-1),r(` ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚\r
        `,-1)])])):I("",!0)]),e[142]||(e[142]=r()),ee(s,{modelValue:Q.value,"onUpdate:modelValue":e[16]||(e[16]=o=>Q.value=o),title:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø´ÙˆØ±",size:"lg","desktop-width":"2xl",closable:!0,"close-on-backdrop":!0},{default:de(()=>[t("div",sr,[t("div",nr,[e[120]||(e[120]=t("i",{class:"ti ti-search absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"},null,-1)),e[121]||(e[121]=r()),j(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>P.value=o),type:"text",placeholder:"Ø¬Ø³ØªØ¬Ùˆ Ú©Ø´ÙˆØ±...",class:"w-full pr-10 pl-4 py-3 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:border-primary"},null,512),[[E,P.value]])]),e[126]||(e[126]=r()),t("div",ir,[(i(!0),a(b,null,ue(xe.value,o=>(i(),a("button",{key:o.code,onClick:g=>o.code==="IR"?Be(o):null,disabled:o.code!=="IR",class:z(["w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all",$.value.code===o.code?"bg-primary/10 border border-primary":o.code==="IR"?"hover:bg-accent cursor-pointer":"opacity-50 cursor-not-allowed"])},[t("img",{src:`/flag/${o.flag}.svg`,alt:o.nameEn,class:"w-7 h-5 object-cover rounded"},null,8,ur),e[123]||(e[123]=r()),t("div",dr,[t("div",fr,x(o.name),1),e[122]||(e[122]=r()),t("div",pr,x(o.nameEn),1)]),e[124]||(e[124]=r()),t("span",mr,x(o.dialCode),1),e[125]||(e[125]=r()),o.code==="IR"?(i(),a(b,{key:0},[$.value.code===o.code?(i(),a("i",cr)):I("",!0)],64)):(i(),a("span",gr,"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ"))],10,ar))),128))])])]),_:1},8,["modelValue"]),e[143]||(e[143]=r()),ee(s,{modelValue:H.value,"onUpdate:modelValue":e[18]||(e[18]=o=>H.value=o),title:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø´ÙˆØ±",size:"lg","desktop-width":"2xl",closable:!0,"close-on-backdrop":!0},{default:de(()=>[t("div",xr,[t("div",vr,[e[127]||(e[127]=t("i",{class:"ti ti-search absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"},null,-1)),e[128]||(e[128]=r()),j(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>P.value=o),type:"text",placeholder:"Ø¬Ø³ØªØ¬Ùˆ Ú©Ø´ÙˆØ±...",class:"w-full pr-10 pl-4 py-3 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:border-primary"},null,512),[[E,P.value]])]),e[133]||(e[133]=r()),t("div",br,[(i(!0),a(b,null,ue(xe.value,o=>(i(),a("button",{key:o.code,onClick:g=>Fe(o),class:z(["w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all",S.value.code===o.code?"bg-primary/10 border border-primary":"hover:bg-accent"])},[t("img",{src:`/flag/${o.flag}.svg`,alt:o.nameEn,class:"w-7 h-5 object-cover rounded"},null,8,wr),e[130]||(e[130]=r()),t("div",hr,[t("div",kr,x(o.name),1),e[129]||(e[129]=r()),t("div",Cr,x(o.nameEn),1)]),e[131]||(e[131]=r()),t("span",Ir,x(o.dialCode),1),e[132]||(e[132]=r()),S.value.code===o.code?(i(),a("i",jr)):I("",!0)],10,yr))),128))])])]),_:1},8,["modelValue"]),e[144]||(e[144]=r()),ee(s,{modelValue:B.value,"onUpdate:modelValue":e[20]||(e[20]=o=>B.value=o),title:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø²Ø¨Ø§Ù†",size:"auto","desktop-width":"lg",closable:!0,"close-on-backdrop":!0},{default:de(()=>[t("div",Er,[t("div",Pr,[t("button",{onClick:e[19]||(e[19]=o=>Me("fa")),class:z(["w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200",G.value==="fa"?"border-primary bg-primary/5 shadow-sm":"border-border bg-card hover:border-primary/50 hover:bg-accent"])},[e[134]||(e[134]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:Je,alt:"Iran",class:"w-7 h-5 object-cover"})]),r(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"ÙØ§Ø±Ø³ÛŒ"),r(),t("div",{class:"text-xs text-muted-foreground"},"Persian")])],-1)),e[135]||(e[135]=r()),G.value==="fa"?(i(),a("i",Dr)):I("",!0)],2),e[136]||(e[136]=r()),e[137]||(e[137]=t("button",{disabled:"",class:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all opacity-50 cursor-not-allowed border-border bg-muted/30"},[t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:Xe,alt:"USA",class:"w-7 h-5 object-cover"})]),r(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"English"),r(),t("div",{class:"text-xs text-muted-foreground"},"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ")])]),r(),t("div",{class:"px-2 py-1 bg-muted rounded text-xs text-muted-foreground"},"Ù‚ÙÙ„")],-1)),e[138]||(e[138]=r()),e[139]||(e[139]=t("button",{disabled:"",class:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all opacity-50 cursor-not-allowed border-border bg-muted/30"},[t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-yellow-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:Ye,alt:"Saudi Arabia",class:"w-7 h-5 object-cover"})]),r(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"),r(),t("div",{class:"text-xs text-muted-foreground"},"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ")])])],-1)),e[140]||(e[140]=r()),e[141]||(e[141]=t("button",{disabled:"",class:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all opacity-50 cursor-not-allowed border-border bg-muted/30"},[t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:Ze,alt:"Turkey",class:"w-7 h-5 object-cover"})]),r(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"TÃ¼rkÃ§e"),r(),t("div",{class:"text-xs text-muted-foreground"},"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ")])])],-1))])])]),_:1},8,["modelValue"]),e[145]||(e[145]=r()),ee(ot,{visible:ie.value,message:ve.value,icon:be.value},null,8,["visible","message","icon"])],64)}}}),$r=nt(Tr,[["__scopeId","data-v-7f434864"]]),Fr={__name:"login",setup(Te){return(re,oe)=>{const le=$r;return i(),He(le)}}};export{Fr as default};
