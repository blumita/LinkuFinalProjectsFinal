import{j as s,u as c,a as r,w as u}from"#entry";import{u as i}from"./DyClqVU4.js";const m=s("userStore",{state:()=>({user:{},cards:[],fetched:!1}),getters:{isUserPro:e=>!!e.user?.isPro,cardCount:e=>e.cards.length},actions:{async fetchUser(){try{const e=i(),{$axios:t}=r(),o=t,{data:a}=await o.get("/user");this.user=a.data,this.cards=this.user?.cardsDataList||[],e.cards=this.cards,this.fetched=!0}catch{const t=u();this.fetched=!0,await t.push("/auth/login")}},setActiveCard(e){},clearProfile(){this.user={},this.cards=[]},async logout(){try{c().clearToken(),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),localStorage.removeItem("userStore"),localStorage.removeItem("formStore"),this.clearProfile(),this.fetched=!1;const{$axios:t}=r(),o=t;o.defaults.headers.common&&delete o.defaults.headers.common.Authorization,document.cookie="auth_token=; path=/; max-age=0",document.cookie="token=; path=/; max-age=0"}catch(e){console.error("Logout error:",e)}}}});export{m as useUserStore};
