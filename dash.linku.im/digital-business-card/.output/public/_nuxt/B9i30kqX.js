import{k as C,r as D,o as P,z as R,a as $,b as i,y as L,e as s,f as e,d as g,g as j,P as x,Q as y,t as r,O as k,h as m,x as S,i as l}from"#entry";import{M as U}from"./CxRnZ5I2.js";import{_ as V}from"./DlAUqK2U.js";function B(){const p=o=>new Intl.NumberFormat("fa-IR").format(o)+" تومان",f=o=>({paid:"پرداخت شده",pending:"در انتظار پرداخت",overdue:"سررسید گذشته",cancelled:"لغو شده",refunded:"بازپرداخت شده"})[o]||o;return{formatPrice:p,getStatusText:f,downloadInvoiceImage:async o=>{const b=`
      فاکتور شماره: ${o.invoiceNumber}
      مبلغ: ${p(o.amount)}
      وضعیت: ${f(o.status)}
      تاریخ صدور: ${o.issueDate}
    `,v=new Blob([b],{type:"text/plain;charset=utf-8"}),d=URL.createObjectURL(v),a=document.createElement("a");a.href=d,a.download=`invoice-${o.invoiceNumber}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(d)}}}const E={class:"min-h-screen bg-background"},T={class:"pt-24 px-6 py-4"},F={key:0,class:"space-y-6 animate-pulse"},O={class:"bg-card border border-border/20 p-6 rounded-2xl"},z={class:"space-y-3"},A={class:"bg-card border border-border/20 p-6 rounded-2xl"},H={class:"space-y-4"},Q={class:"bg-card border border-border/20 p-6 rounded-2xl"},q={class:"space-y-3"},G={key:1,class:"space-y-6"},J={class:"bg-card border border-border/20 p-6 rounded-2xl"},K={class:"flex items-center justify-between mb-4"},W={class:"text-xl font-bold text-foreground mb-1"},X={class:"text-right"},Y={class:"text-2xl font-bold text-foreground"},Z={class:"grid grid-cols-2 gap-4 pt-4 border-t border-border/20"},h={class:"font-medium"},_={class:"font-medium"},tt={class:"bg-card border border-border/20 p-6 rounded-2xl"},et={class:"space-y-3"},st={class:"flex items-center justify-between p-4 bg-muted/30 rounded-xl"},dt={class:"flex-1"},ot={class:"font-medium text-foreground"},nt={class:"text-right"},rt={class:"font-bold text-foreground"},at={class:"mt-4 pt-4 border-t border-border/20"},it={class:"flex justify-between text-lg font-bold"},lt={class:"bg-card border border-border/20 p-6 rounded-2xl"},ut={class:"space-y-3"},bt={class:"flex justify-between"},vt={class:"font-medium"},mt={class:"flex justify-between"},ft={key:0,class:"flex justify-between"},pt={class:"font-medium"},gt={class:"space-y-3"},xt=C({__name:"InvoiceDetailPage",setup(p){const f=R();S();const{downloadInvoiceImage:w,formatPrice:o,getStatusText:b}=B(),v=D(!1),d=D(null),a=[{id:"1",invoiceNumber:"2024001",description:"اشتراک پریمیوم - ماهانه",amount:15e4,issueDate:"1403/06/15",dueDate:"1403/06/25",status:"paid",paymentMethod:"کارت بانکی",paymentDate:"1403/06/16"},{id:"2",invoiceNumber:"2024002",description:"خرید محصول فیزیکی - کارت هوشمند",amount:25e4,issueDate:"1403/06/10",dueDate:"1403/06/20",status:"pending",paymentMethod:"کیف پول"},{id:"3",invoiceNumber:"2024003",description:"ارتقا اشتراک - سالانه",amount:12e5,issueDate:"1403/05/20",dueDate:"1403/05/30",status:"overdue",paymentMethod:"کارت بانکی"},{id:"4",invoiceNumber:"2024004",description:"تمدید اشتراک - 3 ماهه",amount:45e4,issueDate:"1403/05/15",dueDate:"1403/05/25",status:"paid",paymentMethod:"انتقال بانکی",paymentDate:"1403/05/16"}],I=async()=>{if(d.value)try{await w(d.value)}catch{alert("خطا در دانلود فاکتور")}},c=u=>({paid:"bg-green-500/10 text-green-600",pending:"bg-yellow-500/10 text-yellow-600",overdue:"bg-red-500/10 text-red-600",cancelled:"bg-gray-500/10 text-gray-600"})[u]||"bg-muted text-muted-foreground",N=()=>{alert("هدایت به درگاه پرداخت...")};return P(async()=>{const u=f.params.id;v.value=!1;try{const{$axios:t}=$(),n=await t.get(`invoices/${u}`);n.data&&n.data.data?d.value=n.data.data:d.value=a.find(M=>M.id===u)||a[0]}catch(t){console.error("Error loading invoice:",t),d.value=a.find(n=>n.id===u)||a[0]}finally{v.value=!0}}),(u,t)=>(l(),i("div",E,[L(U,{title:"جزئیات فاکتور","home-route":"/dashboard","show-back":!0,"show-home":!0}),t[50]||(t[50]=s()),e("div",T,[v.value?d.value?(l(),i("div",G,[e("div",J,[e("div",K,[e("div",null,[e("h2",W,"فاکتور #"+r(d.value.invoiceNumber),1),t[16]||(t[16]=s()),e("span",{class:k(["text-sm px-3 py-1 rounded-full",c(d.value.status)])},r(m(b)(d.value.status)),3)]),t[19]||(t[19]=s()),e("div",X,[e("p",Y,r(m(o)(d.value.amount)),1),t[17]||(t[17]=s()),t[18]||(t[18]=e("p",{class:"text-sm text-muted-foreground"},"مبلغ کل",-1))])]),t[25]||(t[25]=s()),e("div",Z,[e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm text-muted-foreground mb-1"},"تاریخ صدور",-1)),t[21]||(t[21]=s()),e("p",h,r(d.value.issueDate),1)]),t[24]||(t[24]=s()),e("div",null,[t[22]||(t[22]=e("p",{class:"text-sm text-muted-foreground mb-1"},"تاریخ سررسید",-1)),t[23]||(t[23]=s()),e("p",_,r(d.value.dueDate),1)])])]),t[47]||(t[47]=j(' <div class="bg-card border border-border/20 p-6 rounded-2xl" data-v-b2f2520b><h3 class="text-lg font-semibold text-foreground mb-4" data-v-b2f2520b>اطلاعات مشتری</h3> <div class="space-y-3" data-v-b2f2520b><div class="flex justify-between" data-v-b2f2520b><span class="text-muted-foreground" data-v-b2f2520b>نام مشتری:</span> <span class="font-medium" data-v-b2f2520b>کاربر لینکو</span></div> <div class="flex justify-between" data-v-b2f2520b><span class="text-muted-foreground" data-v-b2f2520b>شماره کاربری:</span> <span class="font-medium" data-v-b2f2520b>USER-2024</span></div> <div class="flex justify-between" data-v-b2f2520b><span class="text-muted-foreground" data-v-b2f2520b>ایمیل:</span> <span class="font-medium" data-v-b2f2520b>user@linku.im</span></div></div></div> ',3)),e("div",tt,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-foreground mb-4"},"آیتم‌های فاکتور",-1)),t[32]||(t[32]=s()),e("div",et,[e("div",st,[e("div",dt,[e("h4",ot,r(d.value.description),1),t[26]||(t[26]=s()),t[27]||(t[27]=e("p",{class:"text-sm text-muted-foreground mt-1"},"مقدار: 1 عدد",-1))]),t[28]||(t[28]=s()),e("div",nt,[e("p",rt,r(m(o)(d.value.amount)),1)])])]),t[33]||(t[33]=s()),e("div",at,[e("div",it,[t[29]||(t[29]=e("span",null,"مجموع کل:",-1)),t[30]||(t[30]=s()),e("span",null,r(m(o)(d.value.amount)),1)])])]),t[48]||(t[48]=s()),e("div",lt,[t[42]||(t[42]=e("h3",{class:"text-lg font-semibold text-foreground mb-4"},"اطلاعات پرداخت",-1)),t[43]||(t[43]=s()),e("div",ut,[e("div",bt,[t[34]||(t[34]=e("span",{class:"text-muted-foreground"},"روش پرداخت:",-1)),t[35]||(t[35]=s()),e("span",vt,r(d.value.paymentMethod),1)]),t[40]||(t[40]=s()),e("div",mt,[t[36]||(t[36]=e("span",{class:"text-muted-foreground"},"وضعیت پرداخت:",-1)),t[37]||(t[37]=s()),e("span",{class:k(c(d.value.status))},r(m(b)(d.value.status)),3)]),t[41]||(t[41]=s()),d.value.status==="paid"?(l(),i("div",ft,[t[38]||(t[38]=e("span",{class:"text-muted-foreground"},"تاریخ پرداخت:",-1)),t[39]||(t[39]=s()),e("span",pt,r(d.value.paymentDate||d.value.issueDate),1)])):g("",!0)])]),t[49]||(t[49]=s()),e("div",gt,[e("button",{onClick:I,class:"w-full bg-muted text-muted-foreground py-3 px-4 rounded-xl font-medium hover:bg-muted/80 transition-colors flex items-center justify-center gap-2"},[...t[44]||(t[44]=[e("i",{class:"ti ti-download text-lg"},null,-1),s(`\r
            دانلود فاکتور (PDF)\r
          `,-1)])]),t[46]||(t[46]=s()),d.value.status==="pending"?(l(),i("button",{key:0,onClick:N,class:"w-full bg-green-500 text-white py-3 px-4 rounded-xl font-medium hover:bg-green-600 transition-colors flex items-center justify-center gap-2"},[...t[45]||(t[45]=[e("i",{class:"ti ti-credit-card text-lg"},null,-1),s(`\r
            پرداخت فاکتور\r
          `,-1)])])):g("",!0)])])):g("",!0):(l(),i("div",F,[t[11]||(t[11]=j('<div class="bg-card border border-border/20 p-6 rounded-2xl" data-v-b2f2520b><div class="flex items-center justify-between mb-4" data-v-b2f2520b><div data-v-b2f2520b><div class="h-6 w-40 bg-muted rounded mb-2" data-v-b2f2520b></div> <div class="h-5 w-20 bg-muted rounded-full" data-v-b2f2520b></div></div> <div class="text-right" data-v-b2f2520b><div class="h-8 w-32 bg-muted rounded mb-1" data-v-b2f2520b></div> <div class="h-4 w-16 bg-muted-foreground/20 rounded" data-v-b2f2520b></div></div></div> <div class="grid grid-cols-2 gap-4 pt-4 border-t border-border/20" data-v-b2f2520b><div data-v-b2f2520b><div class="h-4 w-16 bg-muted-foreground/20 rounded mb-1" data-v-b2f2520b></div> <div class="h-5 w-24 bg-muted rounded" data-v-b2f2520b></div></div> <div data-v-b2f2520b><div class="h-4 w-20 bg-muted-foreground/20 rounded mb-1" data-v-b2f2520b></div> <div class="h-5 w-24 bg-muted rounded" data-v-b2f2520b></div></div></div></div> ',2)),e("div",O,[t[1]||(t[1]=e("div",{class:"h-6 w-28 bg-muted rounded mb-4"},null,-1)),t[2]||(t[2]=s()),e("div",z,[(l(),i(x,null,y(4,n=>e("div",{key:n,class:"flex justify-between"},[...t[0]||(t[0]=[e("div",{class:"h-4 w-20 bg-muted-foreground/20 rounded"},null,-1),s(),e("div",{class:"h-4 w-24 bg-muted rounded"},null,-1)])])),64))])]),t[12]||(t[12]=s()),e("div",A,[t[4]||(t[4]=e("div",{class:"h-6 w-24 bg-muted rounded mb-4"},null,-1)),t[5]||(t[5]=s()),e("div",H,[(l(),i(x,null,y(2,n=>e("div",{key:n,class:"flex justify-between items-center py-3 border-b border-border/20"},[...t[3]||(t[3]=[e("div",null,[e("div",{class:"h-5 w-32 bg-muted rounded mb-1"}),s(),e("div",{class:"h-4 w-20 bg-muted-foreground/20 rounded"})],-1),s(),e("div",{class:"h-5 w-24 bg-muted rounded"},null,-1)])])),64))]),t[6]||(t[6]=s()),t[7]||(t[7]=e("div",{class:"flex justify-between items-center pt-4 border-t border-border/20"},[e("div",{class:"h-6 w-16 bg-muted rounded"}),s(),e("div",{class:"h-6 w-28 bg-muted rounded"})],-1))]),t[13]||(t[13]=s()),e("div",Q,[t[9]||(t[9]=e("div",{class:"h-6 w-32 bg-muted rounded mb-4"},null,-1)),t[10]||(t[10]=s()),e("div",q,[(l(),i(x,null,y(3,n=>e("div",{key:n,class:"flex justify-between"},[...t[8]||(t[8]=[e("div",{class:"h-4 w-24 bg-muted-foreground/20 rounded"},null,-1),s(),e("div",{class:"h-4 w-20 bg-muted rounded"},null,-1)])])),64))])]),t[14]||(t[14]=s()),t[15]||(t[15]=e("div",{class:"flex gap-3"},[e("div",{class:"flex-1 h-12 bg-muted rounded-xl"}),s(),e("div",{class:"flex-1 h-12 bg-muted rounded-xl"})],-1))]))])]))}}),Dt=V(xt,[["__scopeId","data-v-b2f2520b"]]);export{Dt as default};
