import{r as m,u as S,c as n,o as N,a as j,b as d,d as v,e as s,f as e,g as A,t as p,h as y,i,n as w}from"#entry";import{useUserStore as V}from"./0dA2cnp7.js";import{u as P}from"./DyClqVU4.js";import{u as z}from"./BCBHd0SC.js";const B={key:0,class:"h-full overflow-hidden"},M={key:0,class:"fixed inset-0 z-[9999] lg:hidden bg-white"},U={class:"sticky top-0 z-10 bg-white border-b border-border safe-area-top"},E={class:"flex items-center justify-between px-4 py-3"},L={class:"h-[calc(100vh-60px)] overflow-y-auto"},q=["src"],D={class:"fixed inset-0 top-[60px] bottom-[80px] lg:relative lg:top-auto lg:bottom-auto lg:px-6 lg:py-8 lg:h-auto flex items-center justify-center overflow-hidden bg-background"},F={class:"w-full max-w-xs mx-auto px-4 lg:px-0"},I={key:0,class:"text-center animate-pulse"},W={key:1,class:"text-center"},G={class:"bg-card rounded-[22px] overflow-hidden shadow-[0_10px_30px_-10px_rgba(0,0,0,0.25)] border border-border"},H={class:"relative h-28 bg-muted"},J=["src"],K={class:"relative px-4 pb-5 -mt-8"},O={class:"relative w-fit mx-auto"},Q={class:"w-24 h-24 rounded-full overflow-hidden ring-4 ring-card shadow-md bg-background"},R=["src"],X={class:"text-center mt-3 mb-4"},Y={class:"flex items-center justify-center gap-1"},Z={class:"text-[15px] font-extrabold text-foreground"},tt={key:0,class:"ti ti-rosette-discount-check-filled text-primary text-xl"},et={class:"text-[12px] text-muted-foreground mt-1"},st={class:"grid gap-2.5"},ot={key:2,class:"text-center py-8"},rt={key:0,class:"fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm font-medium z-50 shadow-lg"},ut={__name:"index",setup(dt){m("");const c=S(),l=V(),f=P(),g=m(!0),a=m(!1),b=m(!1),h=n(()=>{{const o=localStorage.getItem("auth_token"),t=document.cookie.split("; ").find(u=>u.startsWith("auth_token="))?.split("=")[1];return!!(o||t)}}),k=n(()=>l.user?.name||"کاربر"),x=n(()=>l.user?.userName||l.user?.username||""),C=n(()=>l.user?.avatar||"/logo.svg"),T=n(()=>l.user?.isPro||!1),r=n(()=>f.defaultCard||f.cards?.[0]||null),{fetchCounts:_}=z(),$=async()=>{const o=`${window.location.origin}/${x.value}`;try{await navigator.clipboard.writeText(o),a.value=!0,setTimeout(()=>a.value=!1,2e3)}catch{const t=document.createElement("textarea");t.value=o,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),a.value=!0,setTimeout(()=>a.value=!1,2e3)}};return N(async()=>{if(c.hydrateToken(),c.isAuthenticated){await l.fetchUser(),f.cards=l.cards,await _();const{$permissions:o}=j();o&&o.requestAfterLogin()}g.value=!1}),(o,t)=>h.value?(i(),d("div",B,[b.value?(i(),d("div",M,[e("div",U,[e("div",E,[e("button",{onClick:t[0]||(t[0]=u=>b.value=!1),class:"flex items-center gap-2 text-foreground"},[...t[4]||(t[4]=[e("i",{class:"ti ti-arrow-right text-xl"},null,-1),s(),e("span",{class:"font-medium"},"بازگشت",-1)])]),t[5]||(t[5]=s()),t[6]||(t[6]=e("span",{class:"text-sm text-muted-foreground"},"پیش‌نمایش",-1)),t[7]||(t[7]=s()),t[8]||(t[8]=e("div",{class:"w-20"},null,-1))])]),t[9]||(t[9]=s()),e("div",L,[e("iframe",{src:`/${x.value}`,class:"w-full h-full border-0",title:"پیش‌نمایش پروفایل"},null,8,q)])])):v("",!0),t[26]||(t[26]=s()),e("div",D,[e("div",F,[g.value?(i(),d("div",I,[...t[10]||(t[10]=[A('<div class="bg-card rounded-[22px] overflow-hidden shadow-[0_10px_30px_-10px_rgba(0,0,0,0.25)] border border-border"><div class="h-28 bg-muted"></div> <div class="relative px-4 pb-5 -mt-8"><div class="relative w-fit mx-auto"><div class="w-24 h-24 rounded-full bg-muted ring-4 ring-card shadow-md"></div> <div class="absolute -right-2 bottom-1 h-6 w-6 rounded-full bg-muted shadow border border-border"></div></div> <div class="text-center mt-3 mb-4 space-y-2"><div class="flex items-center justify-center gap-1"><div class="h-5 w-32 bg-muted rounded"></div> <div class="w-5 h-5 bg-muted rounded-full"></div></div> <div class="h-3 w-24 bg-muted-foreground/20 rounded mx-auto"></div></div> <div class="grid gap-2.5"><div class="w-full h-14 rounded-2xl bg-muted"></div> <div class="w-full h-14 rounded-2xl bg-muted"></div></div></div></div>',1)])])):r.value?(i(),d("div",W,[e("div",G,[e("div",H,[r.value.cover?(i(),d("img",{key:0,src:r.value.cover,alt:"بنر پروفایل",class:"absolute inset-0 w-full h-full object-cover"},null,8,J)):v("",!0)]),t[18]||(t[18]=s()),e("div",K,[e("div",O,[e("div",Q,[e("img",{src:r.value.avatar||C.value,alt:"پروفایل",class:"w-full h-full object-cover"},null,8,R)]),t[12]||(t[12]=s()),e("button",{onClick:$,class:"absolute -right-2 bottom-1 h-6 w-6 rounded-full bg-secondary shadow grid place-items-center border border-border hover:bg-secondary/80 transition-colors",title:"کپی لینک"},[...t[11]||(t[11]=[e("i",{class:"ti ti-link text-[14px] text-primary"},null,-1)])])]),t[16]||(t[16]=s()),e("div",X,[e("div",Y,[e("h3",Z,p(k.value),1),t[13]||(t[13]=s()),T.value?(i(),d("i",tt)):v("",!0)]),t[14]||(t[14]=s()),e("p",et,p(r.value.bio||"پروفایل شما"),1)]),t[17]||(t[17]=s()),e("div",st,[e("button",{onClick:t[1]||(t[1]=u=>b.value=!0),class:"w-full h-14 rounded-2xl bg-secondary text-[13px] font-semibold text-primary hover:bg-secondary/80 transition-colors border border-border"},`\r
                    پیش‌نمایش\r
                  `),t[15]||(t[15]=s()),e("button",{onClick:t[2]||(t[2]=u=>("navigateTo"in o?o.navigateTo:y(w))(r.value?.id?`/dashboard/edit-card?id=${r.value.id}&slug=${r.value.slug||""}`:"/dashboard/edit-card")),class:"w-full h-14 rounded-2xl bg-primary text-[13px] font-semibold text-primary-foreground hover:bg-primary/90 transition-colors"},`\r
                    ویرایش\r
                  `)])])])])):(i(),d("div",ot,[t[19]||(t[19]=e("i",{class:"ti ti-user-circle text-6xl text-muted-foreground mb-4"},null,-1)),t[20]||(t[20]=s()),t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-foreground mb-2"},"پروفایلی یافت نشد",-1)),t[22]||(t[22]=s()),t[23]||(t[23]=e("p",{class:"text-sm text-muted-foreground mb-4"},"ابتدا یک پروفایل ایجاد کنید",-1)),t[24]||(t[24]=s()),e("button",{onClick:t[3]||(t[3]=u=>("navigateTo"in o?o.navigateTo:y(w))("/dashboard/add-card")),class:"px-6 py-3 bg-primary text-primary-foreground rounded-xl text-sm font-semibold hover:bg-primary/90 transition-colors"},`\r
              ایجاد پروفایل جدید\r
            `)]))]),t[25]||(t[25]=s()),a.value?(i(),d("div",rt,`\r
        لینک کپی شد!\r
      `)):v("",!0)])])):v("",!0)}};export{ut as default};
