import{d as f}from"./CU4qPF7-.js";import{a as p,n as i}from"#entry";import{r as n,d as y}from"./Ct89Yiyn.js";const m=(a,e)=>a==="subscription"&&e==="renewal_reminder"?[{label:"تمدید اشتراک",type:"primary",action:()=>i("/dashboard/upgrade")},{label:"بعداً یادآوری کن",type:"secondary",action:()=>{}}]:a==="subscription"&&e==="subscription_expired"?[{label:"تمدید فوری",type:"primary",action:()=>i("/dashboard/upgrade")}]:a==="subscription"&&e==="welcome"?[{label:"ایجاد پروفایل",type:"primary",action:()=>i("/dashboard/add-card")}]:a==="payment"&&e==="payment_warning"||e==="purchase_success"?[{label:"تمدید فوری",type:"primary",action:()=>i("/dashboard/upgrade")}]:a==="security"&&e==="new_login"?[{label:"این من بودم",type:"secondary",action:()=>{}},{label:"امنیت حساب",type:"primary",action:()=>i("/dashboard/settings")}]:a==="general"&&e==="login"?[{label:"مشاهده جزئیات",type:"secondary",action:()=>i("/dashboard/settings")}]:[],_=f("notifications",()=>{const a=n([]),e=n("all"),o=n(!1),{$axios:l}=p(),s=l,d=async()=>{o.value=!0;try{const{data:r}=await s.get("user/notifications");if(!r||!r.notifications){a.value=[];return}a.value=r.notifications.map(t=>({id:t.id,type:t.type,rawType:t.raw_type,title:t.title,description:t.message,createdAt:new Date(t.created_at),read:!!t.read_at,actions:m(t.type,t.raw_type)}))}catch{a.value=[]}finally{o.value=!1}},u=y(()=>e.value==="all"?a.value:a.value.filter(r=>r.type===e.value));return{notifications:a,filteredNotifications:u,activeFilter:e,loading:o,fetchNotifications:d,markAsRead:async r=>{const t=a.value.find(c=>c.id===r);if(t&&!t.read){t.read=!0;try{await s.post(`user/notifications/${r}/read`)}catch{t.read=!1}}},markAllAsRead:async()=>{a.value.forEach(r=>r.read=!0),await s.post("user/notifications/readAll")}}});export{_ as u};
