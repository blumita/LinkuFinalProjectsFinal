import{j as O,r as i,a as D,c as $,o as Q,b as l,i as r,e as s,f as e,y as c,g as N,d as x,h as u,t as a,P as p,Q as h,O as T,E as b,F as G,S as z,V as H,a0 as J,T as B,C as K}from"#entry";import{u as W}from"./DVjSPpAI.js";import{useUserStore as X}from"./0dA2cnp7.js";import{u as Y}from"./ClwuxreF.js";import{_ as Z}from"./DlAUqK2U.js";import"./DyClqVU4.js";const _=""+new URL("permium.Do37hPbn.png",import.meta.url).href,tt=""+new URL("clock.CjPF14Cr.png",import.meta.url).href,et=O("support",()=>{const w=i({email:"",phone:"",socialMediaLink:"",active:!0}),{$axios:k}=D(),S=k,g=i(!1),v=i(null);return{support:w,loading:g,error:v,fetchSupport:async()=>{g.value=!0,v.value=null;try{const f=await S.get("support/info");f.data?.data&&(w.value=f.data.data)}catch(f){v.value=f.message||"خطا در دریافت Support"}finally{g.value=!1}}}}),st={class:"space-y-4"},ot={key:0,class:"relative rounded-2xl overflow-hidden bg-gradient-to-b from-gray-200 to-white py-16 px-4 animate-pulse"},rt={key:1},lt={key:0,class:"relative bg-gradient-to-b from-gray-300 to-gray-100 rounded-2xl p-6 mt-12 max-w-7xl mx-auto flex items-center justify-between"},nt={class:"flex flex-col items-end justify-center text-gray-600"},at={class:"flex items-end space-x-2"},it={class:"text-[52px] font-bold text-gray-500 leading-none"},dt={class:"grid lg:grid-cols-4 gap-6"},ut=["onClick"],pt={class:"font-bold text-2xl"},gt={key:0,class:"text-sm hidden opacity-80"},vt={key:1,class:"text-lg text-center bg-white/20 px-6 py-1.5 rounded-full w-fit mx-auto tracking-wide"},ft={class:"flex flex-col items-center space-y-2"},xt={key:0,class:"text-3xl font-extrabold opacity-95"},yt={class:"bg-white border rounded-lg shadow"},mt={class:"border-t p-4 flex gap-2 items-center"},bt={class:"space-y-3"},ct={key:0,class:"space-y-2"},wt={key:1,class:"bg-white rounded-xl border overflow-hidden divide-y divide-gray-200"},kt={class:"flex items-center gap-3 text-gray-800"},St={class:"text-sm font-medium"},Ct={class:"fixed bottom-4 left-4 z-50"},Mt={key:0,class:"fixed bottom-24 left-4 z-50 w-80 bg-white border border-gray-300 rounded-xl shadow-lg p-4 space-y-4"},Pt={class:"flex justify-between items-center"},Lt={class:"space-y-3 text-sm text-gray-700"},jt={class:"flex items-center gap-2"},Vt={class:"flex items-center gap-2"},ht={class:"flex items-center gap-2"},$t={class:"flex items-center gap-2"},It={__name:"index",setup(w){const{error:k,success:S}=W(),g=i(!1),v=i(!1),C=i(!1),f=i(0),y=Y(),F=X(),m=i(!0),M=i(""),P=i(0),L=i(""),R=$(()=>F.user?.isPro),U=$(()=>y.plans),q=$(()=>y.features),A=async()=>{try{const n=await I.post("/discount/validate",{code:M.value.trim()});n.data.success?(C.value=!0,P.value=n.data.data.value,L.value=n.data.data.type,S("کد تخفیف معتبر و روی سفارش اعمال خواهد شد","تخفیف با موفقیت بازیابی شد")):(k("کد تخفیف نامعتبر","کد وارد شده معتبر نیست، لطفاً دوباره تلاش کنید"),C.value=!1)}catch(n){throw n}},{$axios:I}=D();async function E(){const n=await I.get("user/subscription/status");if(n.data?.success){const t=n.data.data.total_remaining_days;f.value=Math.round(t)}}const j=et();Q(async()=>{await j.fetchSupport(),m.value=!0,await E();const n=await y.fetchPlans();m.value=!1});const V=n=>{y.selectedPlanId,n.id;let t=n.price;n.discount&&(t=Math.round(t*(1-n.discount/100))),C.value&&(L.value==="percentage"?t=Math.round(t*(1-P.value/100)):L.value==="fixed"&&(t=Math.max(0,t-P.value)));let d=1;switch(n.duration){case"ماه":d=1;break;case"3ماه":d=3;break;case"6ماه":d=6;break;case"سال":d=12;break}return Math.round(t/d)};return(n,t)=>{const d=G;return r(),l("div",st,[m.value?(r(),l("div",ot,[...t[4]||(t[4]=[N('<div class="absolute inset-0 bg-gray-300 opacity-20" data-v-616c83d7></div> <div class="relative z-10 text-center space-y-3" data-v-616c83d7><div class="h-6 w-1/3 mx-auto bg-gray-300 rounded" data-v-616c83d7></div> <div class="h-4 w-2/3 mx-auto bg-gray-200 rounded" data-v-616c83d7></div> <div class="h-3 w-1/2 mx-auto bg-gray-100 rounded" data-v-616c83d7></div></div>',3)])])):(r(),l("div",rt,[t[11]||(t[11]=N('<div class="relative rounded-2xl overflow-hidden bg-gradient-to-b from-gray-200 to-white py-16 px-4" data-v-616c83d7><div class="absolute inset-0 z-0 opacity-20" data-v-616c83d7><img src="'+_+`" alt="کاربران" class="w-full h-full object-cover" data-v-616c83d7></div> <div class="relative z-10 text-center text-gray-800" data-v-616c83d7><h2 class="text-3xl font-bold mb-4" data-v-616c83d7>خرید اشتراک لینکو</h2> <p class="text-lg font-medium text-gray-600" data-v-616c83d7>با خرید اشتراک <span class="font-bold text-black" data-v-616c83d7>لینکو</span> از\r
            مزایای پیشرفته و امکانات ویژه بهره‌مند شوید.</p> <p class="text-sm text-gray-500 mt-2" data-v-616c83d7>دسترسی سریع‌تر، امکانات اختصاصی، و تجربه‌ای حرفه‌ای‌تر برای کاربران\r
            ویژه.</p></div></div> `,2)),u(R)?(r(),l("div",lt,[e("div",nt,[e("div",at,[e("span",it,a(f.value),1),t[5]||(t[5]=s()),t[6]||(t[6]=e("div",{class:"flex items-center leading-none text-right"},[e("span",{class:"text-sm"},"روز از اشتراک شما باقی مانده")],-1))]),t[7]||(t[7]=s()),t[8]||(t[8]=e("p",{class:"text-xs mt-2 text-gray-500"},"می‌توانید زمان اشتراک خود را افزایش دهید:",-1))]),t[9]||(t[9]=s()),t[10]||(t[10]=e("div",{class:"w-40 h-40 -mt-30 mr-2 rotate-[15deg]"},[e("img",{src:tt,alt:"آیکون ساعت با تاج",class:"w-full h-full object-contain"})],-1))])):x("",!0)])),t[49]||(t[49]=s()),e("div",dt,[m.value?(r(),l(p,{key:0},h(4,o=>e("div",{key:o,class:"rounded-xl p-4 bg-gradient-to-b from-gray-200 to-gray-100 animate-pulse h-40"},[...t[12]||(t[12]=[e("div",{class:"h-5 w-1/3 bg-gray-300 rounded mb-3"},null,-1),s(),e("div",{class:"h-4 w-1/4 bg-gray-200 rounded mb-3"},null,-1),s(),e("div",{class:"h-6 w-2/3 bg-gray-300 rounded mb-3"},null,-1),s(),e("div",{class:"h-8 w-full bg-gray-200 rounded"},null,-1)])])),64)):(r(!0),l(p,{key:1},h(u(U),o=>(r(),l("div",{key:o.id,onClick:Tt=>u(y).selectPlan(o.id),class:T(["rounded-xl p-6 cursor-pointer transition-all text-center relative shadow-md border flex flex-col items-center justify-center space-y-4",u(y).selectedPlanId===o.id?"ring-2 ring-yellow-300 scale-[1.02] shadow-lg":"",o.popularity==="recommended"?"bg-gradient-to-b from-[#D4AF37] to-[#B8860B] text-white border-yellow-600":"bg-gradient-to-b from-[#444] to-[#222] text-white border-gray-600"])},[e("p",pt,a(o.title),1),t[17]||(t[17]=s()),o.subtitle?(r(),l("p",gt,a(o.subtitle),1)):x("",!0),t[18]||(t[18]=s()),o.discount!==0?(r(),l("p",vt,a(o.discount)+`٪ تخفیف\r
          `,1)):x("",!0),t[19]||(t[19]=s()),e("div",ft,[t[14]||(t[14]=e("p",{class:"text-lg font-semibold opacity-90"},"هر ماه",-1)),t[15]||(t[15]=s()),["ماه","3ماه","6ماه","سال"].includes(o.duration)?(r(),l("p",xt,[o.duration==="ماه"?(r(),l(p,{key:0},[s(a(Math.round(V(o)).toLocaleString("fa-IR"))+` تومان\r
              `,1)],64)):x("",!0),t[13]||(t[13]=s()),o.duration==="3ماه"?(r(),l(p,{key:1},[s(a(Math.round(V(o)).toLocaleString("fa-IR"))+` تومان\r
              `,1)],64)):o.duration==="6ماه"?(r(),l(p,{key:2},[s(a(Math.round(V(o)).toLocaleString("fa-IR"))+` تومان\r
              `,1)],64)):o.duration==="سال"?(r(),l(p,{key:3},[s(a(Math.round(V(o)).toLocaleString("fa-IR"))+` تومان\r
              `,1)],64)):x("",!0)])):x("",!0)]),t[20]||(t[20]=s()),c(d,{to:{name:"dashboard-checkout",query:{id:o.id,discountCode:M.value.trim(),discountValue:P.value,discountType:L.value.trim()}},class:"block w-full"},{default:b(()=>[...t[16]||(t[16]=[e("button",{class:"w-full py-2 mt-3 bg-white text-black font-bold rounded hover:bg-yellow-100 transition"},`\r
              سفارش\r
            `,-1)])]),_:1},8,["to"])],10,ut))),128))]),t[50]||(t[50]=s()),e("div",yt,[e("button",{onClick:t[0]||(t[0]=o=>g.value=!g.value),class:"w-full flex items-center justify-between px-4 py-3 font-bold text-gray-800 text-right"},[...t[21]||(t[21]=[e("span",null,"کد تخفیف خرید اشتراک خود را وارد کنید.",-1),s(),e("i",{class:"ti ti-percentage text-xl text-gray-500"},null,-1)])]),t[23]||(t[23]=s()),c(B,{name:"fade"},{default:b(()=>[z(e("div",mt,[e("button",{onClick:A,class:"bg-green-500 hover:bg-green-600 text-white font-bold px-4 py-2 rounded"},`\r
            تایید کد\r
          `),t[22]||(t[22]=s()),z(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>M.value=o),class:"flex-1 border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 text-gray-700",placeholder:"مثلاً: OFF50"},null,512),[[H,M.value]])],512),[[J,g.value]])]),_:1})]),t[51]||(t[51]=s()),e("div",bt,[t[27]||(t[27]=e("h3",{class:"text-lg font-semibold text-gray-800 text-right"},"ویژگی‌های اشتراک",-1)),t[28]||(t[28]=s()),m.value?(r(),l("div",ct,[(r(),l(p,null,h(4,o=>e("div",{key:o,class:"h-10 bg-gray-200 rounded animate-pulse"})),64))])):(r(),l("div",wt,[(r(!0),l(p,null,h(u(q),o=>(r(),K(d,{key:o.slug,to:{path:"/dashboard/upgrade/feature",query:{slug:o.slug}},class:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 transition no-underline"},{default:b(()=>[e("div",kt,[e("i",{class:T(`ti ${o.icon} text-lg text-gray-600`)},null,2),t[24]||(t[24]=s()),e("span",St,a(o.title),1)]),t[25]||(t[25]=s()),t[26]||(t[26]=e("i",{class:"ti ti-chevron-left text-gray-400 text-base"},null,-1))]),_:2},1032,["to"]))),128))]))]),t[52]||(t[52]=s()),e("div",Ct,[e("button",{onClick:t[2]||(t[2]=o=>v.value=!0),class:"bg-black hover:bg-gray-800 text-white rounded-full shadow-lg px-4 py-2 flex items-center gap-2"},[...t[29]||(t[29]=[e("i",{class:"ti ti-headset"},null,-1),s(`\r
        پشتیبانی\r
      `,-1)])])]),t[53]||(t[53]=s()),c(B,{name:"fade"},{default:b(()=>[v.value?(r(),l("div",Mt,[e("div",Pt,[t[31]||(t[31]=e("h3",{class:"font-bold text-gray-800"},"پشتیبانی",-1)),t[32]||(t[32]=s()),e("button",{onClick:t[3]||(t[3]=o=>v.value=!1)},[...t[30]||(t[30]=[e("i",{class:"ti ti-x text-gray-500 hover:text-red-500"},null,-1)])])]),t[48]||(t[48]=s()),e("div",Lt,[e("div",jt,[t[34]||(t[34]=e("i",{class:"ti ti-mail text-gray-500"},null,-1)),t[35]||(t[35]=s()),e("span",null,[t[33]||(t[33]=e("strong",null,"ایمیل:",-1)),s(" "+a(u(j).support.email),1)])]),t[45]||(t[45]=s()),e("div",Vt,[t[37]||(t[37]=e("i",{class:"ti ti-phone text-gray-500"},null,-1)),t[38]||(t[38]=s()),e("span",null,[t[36]||(t[36]=e("strong",null,"تلفن:",-1)),s(" "+a(u(j).support.phone),1)])]),t[46]||(t[46]=s()),e("div",ht,[t[40]||(t[40]=e("i",{class:"ti ti-send text-gray-500"},null,-1)),t[41]||(t[41]=s()),e("span",null,[t[39]||(t[39]=e("strong",null,"تلگرام:",-1)),s(" "+a(u(j).support.socialMediaLink),1)])]),t[47]||(t[47]=s()),e("div",$t,[t[43]||(t[43]=e("i",{class:"ti ti-help text-gray-500"},null,-1)),t[44]||(t[44]=s()),c(d,{to:"/dashboard/support/faq",class:"text-yellow-600 hover:underline transition-colors"},{default:b(()=>[...t[42]||(t[42]=[s(`\r
              پرسش‌های متداول\r
            `,-1)])]),_:1})])])])):x("",!0)]),_:1})])}}},Nt=Z(It,[["__scopeId","data-v-616c83d7"]]),qt={__name:"index",setup(w){return(k,S)=>(r(),l("div",null,[c(Nt)]))}};export{qt as default};
