import{u as N,a as S,n as c}from"#entry";import{useUserStore as _}from"./BRBG3GYJ.js";import{u as j}from"./lVmvsOkf.js";import{u as A}from"./-yLFTZKB.js";import{r as u,d as n,j as P,k as d,l as v,p as s,q as e,s as V,u as y,v as w,x as i}from"./Ct89Yiyn.js";import"./CU4qPF7-.js";import"./ngrFHoWO.js";const z={class:"h-full"},B={key:0,class:"fixed inset-0 z-[9999] lg:hidden bg-white"},M={class:"sticky top-0 z-10 bg-white border-b border-border safe-area-top"},U={class:"flex items-center justify-between px-4 py-3"},q={class:"h-[calc(100vh-60px)] overflow-y-auto"},E=["src"],L={class:"fixed inset-0 top-[60px] bottom-[80px] lg:relative lg:top-auto lg:bottom-auto lg:px-6 lg:py-8 lg:h-auto flex items-center justify-center overflow-hidden"},D={class:"w-full max-w-xs mx-auto px-4 lg:px-0"},F={key:0,class:"text-center animate-pulse"},G={key:1,class:"text-center"},H={class:"bg-card rounded-[22px] overflow-hidden shadow-[0_10px_30px_-10px_rgba(0,0,0,0.25)] border border-border"},I={class:"relative h-28 bg-muted"},J=["src"],K={class:"relative px-4 pb-5 -mt-8"},O={class:"relative w-fit mx-auto"},Q={class:"w-24 h-24 rounded-full overflow-hidden ring-4 ring-card shadow-md bg-background"},R=["src"],W={class:"text-center mt-3 mb-4"},X={class:"flex items-center justify-center gap-1"},Y={class:"text-[15px] font-extrabold text-foreground"},Z={key:0,class:"ti ti-rosette-discount-check-filled text-primary text-xl"},tt={class:"text-[12px] text-muted-foreground mt-1"},et={class:"grid gap-2.5"},st={key:2,class:"text-center py-8"},ot={key:0,class:"fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm font-medium z-50 shadow-lg"},mt={__name:"index",setup(rt){u("");const p=N(),l=_(),m=j(),b=u(!0),a=u(!1),f=u(!1),h=n(()=>l.user?.name||"کاربر"),g=n(()=>l.user?.userName||l.user?.username||""),k=n(()=>l.user?.avatar||"/logo.svg"),C=n(()=>l.user?.isPro||!1),r=n(()=>m.defaultCard||m.cards?.[0]||null),{fetchCounts:T}=A(),$=async()=>{const o=`${window.location.origin}/${g.value}`;try{await navigator.clipboard.writeText(o),a.value=!0,setTimeout(()=>a.value=!1,2e3)}catch{const t=document.createElement("textarea");t.value=o,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),a.value=!0,setTimeout(()=>a.value=!1,2e3)}};return P(async()=>{if(p.hydrateToken(),p.isAuthenticated){await l.fetchUser(),m.cards=l.cards,await T();const{$permissions:o}=S();o&&o.requestAfterLogin()}b.value=!1}),(o,t)=>(i(),d("div",z,[f.value?(i(),d("div",B,[e("div",M,[e("div",U,[e("button",{onClick:t[0]||(t[0]=x=>f.value=!1),class:"flex items-center gap-2 text-foreground"},[...t[4]||(t[4]=[e("i",{class:"ti ti-arrow-right text-xl"},null,-1),s(),e("span",{class:"font-medium"},"بازگشت",-1)])]),t[5]||(t[5]=s()),t[6]||(t[6]=e("span",{class:"text-sm text-muted-foreground"},"پیش‌نمایش",-1)),t[7]||(t[7]=s()),t[8]||(t[8]=e("div",{class:"w-20"},null,-1))])]),t[9]||(t[9]=s()),e("div",q,[e("iframe",{src:`/${g.value}`,class:"w-full h-full border-0",title:"پیش‌نمایش پروفایل"},null,8,E)])])):v("",!0),t[26]||(t[26]=s()),e("div",L,[e("div",D,[b.value?(i(),d("div",F,[...t[10]||(t[10]=[V('<div class="bg-card rounded-[22px] overflow-hidden shadow-[0_10px_30px_-10px_rgba(0,0,0,0.25)] border border-border"><div class="h-28 bg-muted"></div> <div class="relative px-4 pb-5 -mt-8"><div class="relative w-fit mx-auto"><div class="w-24 h-24 rounded-full bg-muted ring-4 ring-card shadow-md"></div> <div class="absolute -right-2 bottom-1 h-6 w-6 rounded-full bg-muted shadow border border-border"></div></div> <div class="text-center mt-3 mb-4 space-y-2"><div class="flex items-center justify-center gap-1"><div class="h-5 w-32 bg-muted rounded"></div> <div class="w-5 h-5 bg-muted rounded-full"></div></div> <div class="h-3 w-24 bg-muted-foreground/20 rounded mx-auto"></div></div> <div class="grid gap-2.5"><div class="w-full h-14 rounded-2xl bg-muted"></div> <div class="w-full h-14 rounded-2xl bg-muted"></div></div></div></div>',1)])])):r.value?(i(),d("div",G,[e("div",H,[e("div",I,[r.value.cover?(i(),d("img",{key:0,src:r.value.cover,alt:"بنر پروفایل",class:"absolute inset-0 w-full h-full object-cover"},null,8,J)):v("",!0)]),t[18]||(t[18]=s()),e("div",K,[e("div",O,[e("div",Q,[e("img",{src:r.value.avatar||k.value,alt:"پروفایل",class:"w-full h-full object-cover"},null,8,R)]),t[12]||(t[12]=s()),e("button",{onClick:$,class:"absolute -right-2 bottom-1 h-6 w-6 rounded-full bg-secondary shadow grid place-items-center border border-border hover:bg-secondary/80 transition-colors",title:"کپی لینک"},[...t[11]||(t[11]=[e("i",{class:"ti ti-link text-[14px] text-primary"},null,-1)])])]),t[16]||(t[16]=s()),e("div",W,[e("div",X,[e("h3",Y,y(h.value),1),t[13]||(t[13]=s()),C.value?(i(),d("i",Z)):v("",!0)]),t[14]||(t[14]=s()),e("p",tt,y(r.value.bio||"پروفایل شما"),1)]),t[17]||(t[17]=s()),e("div",et,[e("button",{onClick:t[1]||(t[1]=x=>f.value=!0),class:"w-full h-14 rounded-2xl bg-secondary text-[13px] font-semibold text-primary hover:bg-secondary/80 transition-colors border border-border"},`\r
                    پیش‌نمایش\r
                  `),t[15]||(t[15]=s()),e("button",{onClick:t[2]||(t[2]=x=>("navigateTo"in o?o.navigateTo:w(c))(r.value?.id?`/dashboard/edit-card?id=${r.value.id}&slug=${r.value.slug||""}`:"/dashboard/edit-card")),class:"w-full h-14 rounded-2xl bg-primary text-[13px] font-semibold text-primary-foreground hover:bg-primary/90 transition-colors"},`\r
                    ویرایش\r
                  `)])])])])):(i(),d("div",st,[t[19]||(t[19]=e("i",{class:"ti ti-user-circle text-6xl text-muted-foreground mb-4"},null,-1)),t[20]||(t[20]=s()),t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-foreground mb-2"},"پروفایلی یافت نشد",-1)),t[22]||(t[22]=s()),t[23]||(t[23]=e("p",{class:"text-sm text-muted-foreground mb-4"},"ابتدا یک پروفایل ایجاد کنید",-1)),t[24]||(t[24]=s()),e("button",{onClick:t[3]||(t[3]=x=>("navigateTo"in o?o.navigateTo:w(c))("/dashboard/add-card")),class:"px-6 py-3 bg-primary text-primary-foreground rounded-xl text-sm font-semibold hover:bg-primary/90 transition-colors"},`\r
              ایجاد پروفایل جدید\r
            `)]))]),t[25]||(t[25]=s()),a.value?(i(),d("div",ot,`\r
        لینک کپی شد!\r
      `)):v("",!0)])]))}};export{mt as default};
