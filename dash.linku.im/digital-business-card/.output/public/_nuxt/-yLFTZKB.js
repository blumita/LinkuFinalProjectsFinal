import{u as q}from"./lVmvsOkf.js";import{a as x}from"#entry";import{r as a,d as p}from"./Ct89Yiyn.js";const I=()=>{const s=a(0),n=a(0),u=a(0),r=a(0),c=a(0),l=a(0),d=q(),{$axios:C}=x(),t=C,o=p(()=>s.value+n.value+u.value+r.value+c.value+l.value),m=p(()=>o.value>99?"99+":o.value.toString()),i=async()=>{const e=d.defaultCard?.id;if(!(!e||!t))try{const v=(await t.get(`club/${e}/luckyDice/resultCount`)).data?.data||{};s.value=v.unreadCount||0;const f=(await t.get(`club/${e}/luckyEgg/resultCount`)).data?.data||{};n.value=f.unreadCount||0;const R=(await t.get(`club/${e}/luckyWheel/resultCount`)).data?.data||{};u.value=R.unreadCount||0;const[w,h]=await Promise.all([t.get(`v1/cards/${e}/leads/leadsCount`),t.get(`v1/cards/${e}/forms/formsCount`)]),y=w.data?.data||{},D=h.data?.data||{};r.value=(y.unreadCount||0)+(D.unreadCount||0);const $=(await t.get(`club/${e}/questions/questionsCount`)).data?.data||{};c.value=$.unreadCount||0;const k=await t.get(`card/${e}/poll/votes`,{params:{page:1,perPage:1}});l.value=k.data?.data?.pagination?.total||0,d.setInboxBadge(o.value)}catch(g){console.error("Error fetching message counts:",g)}};return i(),{luckyDiceCount:s,luckyEggCount:n,luckyWheelCount:u,infoFormCount:r,questionBoxCount:c,pollCount:l,totalMessageCount:o,formattedMessageCount:m,fetchCounts:i}};export{I as u};
