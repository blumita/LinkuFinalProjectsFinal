import{j as l,s}from"#entry";const a=e=>e?e.startsWith("data:")||e.startsWith("/")&&!e.startsWith("//")||e.startsWith("https://")?e:typeof window<"u"&&window.location.protocol==="https:"?e.replace("http://localhost:8000","https://localhost:8443").replace("http://127.0.0.1:8000","https://localhost:8443"):e:null,d=[{id:"1",label:"نام کامل",name:"fullName",required:!1,type:"text"},{id:"2",label:"ایمیل",name:"email",required:!1,type:"text"},{id:"3",label:"شماره تماس",name:"phoneNumber",required:!1,type:"text"},{id:"4",label:"عنوان شغلی",name:"jobTitle",required:!1,type:"text"},{id:"5",label:"شرکت",name:"company",required:!1,type:"text"},{id:"6",label:"یادداشت",name:"note",required:!1,type:"text"}],c=l("form",{state:()=>({layout:"right",isListMode:!0,themeColor:{background:"transparent",text:"#000000"},iconColor:{background:"transparent",text:"#000000"},matchThemeColor:!1,name:"",cardName:"",location:"",job:"",company:"",bio:"",saveContact:"",profileImage:null,coverImage:null,logoImage:null,links:[],activeLinkIndex:0,removeBranding:!1,formTitle:"",connectButtonText:"ارسال",formDisclaimer:"اطلاعات شما محرمانه می‌ماند",isLeadCaptureEnabled:!1,fields:[],leadCaptureForm:{name:"",email:"",message:""},qrColor:"",qrBgColor:"",qrLogo:"",qrRadius:0,qrLogoSize:0,qrSize:0,qrMargin:0,logoBackground:!1,formSaved:!1,newCardId:null,selectedCardId:null,cards:[],inboxBadge:0,textsection:{title:"",value:"",align:"right",icon:"",customIcon:""}}),getters:{activeLink(e){const t=Math.max(0,Math.min(e.activeLinkIndex||0,e.links.length-1));return e.links[t]||{id:"",title:"لینک جدید",description:"",value:"",type:"default",enabled:!0}},layoutClass(e){return`layout-${e.layout}`},safeProfileImage(e){return a(e.profileImage)},safeCoverImage(e){return a(e.coverImage)},safeLogoImage(e){return a(e.logoImage)},themeClass(e){return`theme-${(e.themeColor.background||"#ffffff").replace("#","")}`},requiredFields(e){return e.fields.filter(t=>t.required)},defaultCard(e){return e.cards.find(t=>t.isDefault)||null}},actions:{setListMode(e){this.isListMode=e},setInboxBadge(e){this.inboxBadge=e},toggleLeadCapture(e){this.isLeadCaptureEnabled=e},resetAbout(){this.name="",this.job="",this.company="",this.location="",this.bio="",this.saveContact="",this.profileImage=null,this.coverImage=null,this.logoImage=null,this.iconColor={background:"transparent",text:"#000000"},this.themeColor={background:"transparent",text:"#000000"}},addLink(e){this.links.push({id:`${Date.now()}_${Math.floor(Math.random()*1e8)}`,...e,enabled:!0})},updateLink(e,t){const i=this.links.findIndex(o=>o.id===e);i!==-1&&(this.links[i]={...this.links[i],...t})},removeLink(e){this.links=this.links.filter(t=>t.id!==e),this.activeLinkIndex>=this.links.length&&(this.activeLinkIndex=Math.max(0,this.links.length-1))},addField(e){this.fields.push({id:Date.now().toString(),...e})},updateField(e,t){const i=this.fields.findIndex(o=>o.id===e);i!==-1&&(this.fields[i]={...this.fields[i],...t})},resetFormFields(){this.fields=JSON.parse(JSON.stringify(d)),this.formTitle="",this.connectButtonText="ارسال",this.formDisclaimer="اطلاعات شما محرمانه می‌ماند",this.isLeadCaptureEnabled=!1,this.leadCaptureForm={name:"",email:"",message:""}},saveLeadCaptureForm(){s.setItem("leadCaptureForm",JSON.stringify(this.leadCaptureForm))},loadLeadCaptureForm(){const e=s.getItem("leadCaptureForm");e&&(this.leadCaptureForm=JSON.parse(e))},addCard(e){this.cards.push({id:Date.now().toString(),...e}),this.formSaved=!0,this.setNewCardId(Number(e.id))},setNewCardId(e){this.newCardId=e},updateCard(e,t){const i=this.cards.findIndex(o=>o.id===e);i!==-1&&(this.cards[i]={...this.cards[i],...t})},removeCard(e){this.cards=this.cards.filter(t=>t.id!==e)},setDefaultCard(e){this.cards=this.cards.map(t=>({...t,isDefault:t.id===e}))},setAboutFrom(e){this.selectedCardId=e;const t=this.cards.find(r=>Number(r.id)===Number(e));if(!t)return;this.name=t.userName||"",this.cardName=t.name||"",this.job=t.job||"",this.company=t.company||"",this.location=t.location||"",this.bio=t.bio||"",this.profileImage=t.avatar||null,this.coverImage=t.cover||null,this.logoImage=t.logo||null;const i=typeof t.themeColor=="string"?JSON.parse(t.themeColor):t.themeColor,o=typeof t.iconColor=="string"?JSON.parse(t.iconColor):t.iconColor;this.themeColor={background:i?.background||"transparent",text:i?.text||"#000000"},this.iconColor={background:o?.background||"transparent",text:o?.text||"#000000"},this.matchThemeColor=t.matchThemeColor||!1,this.saveContact=t.saveContact||"",this.layout=t.layoutMode||"right",this.formTitle=t.formTitle||"",this.connectButtonText=t.connectButtonText||"ارسال",this.isLeadCaptureEnabled=!!t.leadCaptureMode,this.removeBranding=t.removeBranding||!1,this.links=t.linksDataList?t.linksDataList.map(r=>this.normalizeLink(r)):[];const n=[{id:"1",type:"text",label:"نام",name:"fullName",required:!0},{id:"2",type:"text",label:"ایمیل",name:"email",required:!0},{id:"3",type:"text",label:"شماره تماس",name:"phoneNumber",required:!1}];this.fields=t.fields&&t.fields.length>0?t.fields:n,this.formTitle=t.formTitle||"فرم تماس",this.connectButtonText=t.submitButtonText||t.connectButtonText||"ارسال",this.formDisclaimer=t.formDisclaimer||"اطلاعات شما محرمانه می‌ماند",this.qrColor=t.qrColor??"#000000",this.qrBgColor=t.qrBgColor??"#ffffff",this.qrLogoSize=t.qrLogoSize??15,this.qrLogo=t.qrLogo??"/logo/logo.png",this.qrRadius=t.qrRadius??10,this.qrSize=t.qrSize??200,this.qrMargin=t.qrMargin??10,this.logoBackground=t.logoBackground??!1},normalizeLink(e){const t=["برقراری تماس با شماره دلخواه","ارسال ایمیل با آدرس دلخواه","افزودن نقشه تعاملی با مختصات جغرافیایی","ارسال پیام به شماره مورد نظر","مشاهده پروفایل در اینستاگرام","ارتباط از طریق تلگرام","چت در واتساپ","مشاهده وبسایت","description",""," "];let i="";e.description&&typeof e.description=="string"&&e.description.trim()&&!t.includes(e.description.trim())&&e.description.trim().length>0&&(i=e.description.trim());const o={...e,icon:e.icon?this.safeJsonParse(e.icon):null,placeholder:e.placeholder?this.safeJsonParse(e.placeholder):null,showDescription:e.showDescription||!1};return i?o.description=i:delete o.description,o},safeJsonParse(e){try{return typeof e=="string"?JSON.parse(e):e}catch{return e}},setTextSectionField(e,t){this.textsection[e]=t},resetTextSection(){this.textsection={title:"",value:"",align:"right",icon:"",customIcon:""}},setIconColor(e){this.iconColor={...e}},resetIconColor(){this.iconColor={background:"transparent",text:"#000000"}}}});export{d,c as u};
