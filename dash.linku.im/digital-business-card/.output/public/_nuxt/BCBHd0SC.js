import{u as q}from"./DyClqVU4.js";import{r as a,a as x,c as C}from"#entry";const F=()=>{const s=a(0),n=a(0),u=a(0),c=a(0),r=a(0),l=a(0),d=q(),{$axios:p}=x(),t=p,o=C(()=>s.value+n.value+u.value+c.value+r.value+l.value),v=C(()=>o.value>99?"99+":o.value.toString()),i=async()=>{const e=d.defaultCard?.id;if(!(!e||!t))try{const m=(await t.get(`club/${e}/luckyDice/resultCount`)).data?.data||{};s.value=m.unreadCount||0;const f=(await t.get(`club/${e}/luckyEgg/resultCount`)).data?.data||{};n.value=f.unreadCount||0;const R=(await t.get(`club/${e}/luckyWheel/resultCount`)).data?.data||{};u.value=R.unreadCount||0;const[w,h]=await Promise.all([t.get(`v1/cards/${e}/leads/leadsCount`),t.get(`v1/cards/${e}/forms/formsCount`)]),y=w.data?.data||{},D=h.data?.data||{};c.value=(y.unreadCount||0)+(D.unreadCount||0);const $=(await t.get(`club/${e}/questions/questionsCount`)).data?.data||{};r.value=$.unreadCount||0;const k=await t.get(`card/${e}/votes`,{params:{page:1,perPage:1}});l.value=k.data?.data?.pagination?.total||0,d.setInboxBadge(o.value)}catch(g){console.error("Error fetching message counts:",g)}};return i(),{luckyDiceCount:s,luckyEggCount:n,luckyWheelCount:u,infoFormCount:c,questionBoxCount:r,pollCount:l,totalMessageCount:o,formattedMessageCount:v,fetchCounts:i}};export{F as u};
