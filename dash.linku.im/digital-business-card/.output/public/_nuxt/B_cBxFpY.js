import{_ as h}from"./CgleJCdt.js";import{b as S,f as j,u as C,e as N}from"#entry";import{u as D}from"./D64zF-rC.js";import{y as V,r as _,j as $,k as a,x as d,v as r,s as f,q as s,p as e,u as l,l as I,F as c,I as v}from"./Ct89Yiyn.js";import"./CU4qPF7-.js";import"./ngrFHoWO.js";const T={class:"min-h-screen bg-background flex items-center justify-center px-4"},B={key:0,class:"bg-card rounded-3xl p-8 text-center max-w-md w-full"},L={key:1,class:"bg-card rounded-3xl p-8 text-center max-w-md w-full shadow-2xl relative overflow-hidden"},P={class:"relative z-10 space-y-6"},R={class:"accent-bg/10 rounded-xl p-4 border",style:{"border-color":"var(--accent-color)"}},q={class:"font-semibold text-lg mb-2 accent-text"},M={class:"text-sm text-secondary space-y-1"},O={class:"flex items-center justify-center gap-2"},z={class:"text-primary font-medium"},A={class:"bg-secondary/50 rounded-lg p-4 space-y-2 text-sm"},E={class:"flex justify-between"},F={class:"text-primary font-medium"},J={key:0,class:"flex justify-between"},U={class:"text-primary font-mono text-xs"},G={class:"space-y-3"},H={class:"flex gap-3 justify-center text-sm"},K={key:2,class:"bg-card rounded-3xl p-8 text-center max-w-md w-full"},Q={class:"space-y-6"},W=V({__name:"index",setup(w){const y=S(),b=j(),i=D(),p=C(),g=_(!0),o=_(null),k=()=>{y.push("/dashboard")};return $(async()=>{const{status:x,transaction_id:t,plan_id:u}=b.query;if(x==="success"&&t)try{await p.fetchUser(),i.plans.length===0&&await i.fetchPlans();const n=i.plans.find(m=>Number(m.id)===Number(u));if(n&&p.user){const m=Math.round(n.price*(1-n.discount/100));o.value={planTitle:`${n.title} ูพุฑููู`,duration:n.duration,amount:m.toLocaleString("fa-IR"),expiryDate:p.user.subscription?.expire_date||"ูุงูุดุฎุต",trackingCode:t}}}catch{}else{const n=localStorage.getItem("last_purchase");n&&(o.value=JSON.parse(n),localStorage.removeItem("last_purchase"))}g.value=!1}),(x,t)=>{const u=N;return d(),a("div",T,[r(g)?(d(),a("div",B,[...t[1]||(t[1]=[f('<div class="animate-pulse space-y-6"><div class="w-20 h-20 bg-secondary rounded-full mx-auto"></div> <div class="space-y-2"><div class="h-8 bg-secondary rounded mx-auto w-48"></div> <div class="h-6 bg-secondary rounded mx-auto w-32"></div></div> <div class="h-24 bg-secondary rounded"></div> <div class="h-12 bg-secondary rounded"></div></div>',1)])])):r(o)?(d(),a("div",L,[t[20]||(t[20]=s("div",{class:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-primary/10"},null,-1)),t[21]||(t[21]=e()),s("div",P,[t[17]||(t[17]=f(`<div class="flex justify-center"><div class="w-20 h-20 rounded-full flex items-center justify-center shadow-lg" style="background:linear-gradient(135deg, #10b981 0%, #059669 100%);"><i class="ti ti-check text-white text-4xl"></i></div></div> <div class="space-y-2"><h1 class="text-2xl font-bold text-primary">\r
            ๐ ุชุจุฑฺฉ!\r
          </h1> <p class="text-lg text-secondary">\r
            ุงุดุชุฑุงฺฉ ุดูุง ุจุง ููููุช ูุนุงู ุดุฏ\r
          </p></div> `,4)),s("div",R,[s("div",q,l(r(o).planTitle),1),t[5]||(t[5]=e()),s("div",M,[s("div",O,[t[2]||(t[2]=s("i",{class:"ti ti-calendar text-green-500"},null,-1)),t[3]||(t[3]=e()),s("span",null,l(r(o).duration)+" ุงุดุชุฑุงฺฉ ูุนุงู",1)]),t[4]||(t[4]=e()),s("div",z,`\r
              ุชุง `+l(r(o).expiryDate)+` ูุนุชุจุฑ ุงุณุช\r
            `,1)])]),t[18]||(t[18]=e()),s("div",A,[s("div",E,[t[6]||(t[6]=s("span",{class:"text-secondary"},"ูุจูุบ ูพุฑุฏุงุฎุช:",-1)),t[7]||(t[7]=e()),s("span",F,l(r(o).amount)+" ุชููุงู",1)]),t[10]||(t[10]=e()),r(o).trackingCode?(d(),a("div",J,[t[8]||(t[8]=s("span",{class:"text-secondary"},"ฺฉุฏ ูพฺฏุฑ:",-1)),t[9]||(t[9]=e()),s("span",U,l(r(o).trackingCode),1)])):I("",!0)]),t[19]||(t[19]=e()),s("div",G,[s("button",{onClick:k,class:"w-full accent-bg accent-text font-semibold py-3 px-6 rounded-xl hover:opacity-90 transition-all duration-200"},`\r
            ูุฑูุฏ ุจู ูพุฑููุงู\r
          `),t[16]||(t[16]=e()),s("div",H,[c(u,{to:"/dashboard/add-card",class:"text-accent hover:underline font-medium"},{default:v(()=>[...t[11]||(t[11]=[e(`\r
              ุณุงุฎุช ูพุฑููุงู ุฌุฏุฏ\r
            `,-1)])]),_:1}),t[13]||(t[13]=e()),t[14]||(t[14]=s("span",{class:"text-border"},"|",-1)),t[15]||(t[15]=e()),c(u,{to:"/financial/invoices",class:"text-secondary hover:text-primary font-medium"},{default:v(()=>[...t[12]||(t[12]=[e(`\r
              ูุดุงูุฏู ูุงฺฉุชูุฑ\r
            `,-1)])]),_:1})])])])])):(d(),a("div",K,[s("div",Q,[t[22]||(t[22]=f('<div class="w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mx-auto"><i class="ti ti-x text-red-500 text-4xl"></i></div> <div class="space-y-2"><h2 class="text-xl font-bold text-primary">ุฎุทุง ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช</h2> <p class="text-sm text-secondary">ุงุทูุงุนุงุช ุฎุฑุฏ ุงูุช ูุดุฏ</p></div> ',4)),s("button",{onClick:t[0]||(t[0]=n=>x.$router.push("/dashboard/checkout")),class:"w-full accent-bg accent-text font-semibold py-3 px-6 rounded-xl hover:opacity-90 transition-all duration-200"},`\r
          ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุดุชุฑุงฺฉ\r
        `)])]))])}}}),nt={__name:"index",setup(w){return(y,b)=>{const i=h;return d(),a("div",null,[c(i,null,{default:v(()=>[c(W)]),_:1})])}}};export{nt as default};
