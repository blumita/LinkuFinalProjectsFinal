import{_ as Ge}from"./Bv-RA7Kk.js";import{ag as Ke,k as Qe,r as f,c as te,s as V,ah as Pe,a as Ye,w as He,u as Je,o as Xe,M as je,b as u,i as d,f as t,e as o,y as re,d as S,P as y,t as v,S as I,V as E,O as z,h as oe,Q as pe,g as Se,E as me,A as Ze,C as _e}from"#entry";import{u as et,_ as tt,a as rt,b as ot,c as st}from"./Cge1x_n7.js";import{I as lt}from"./DJY3EWAx.js";import{useUserStore as nt}from"./0dA2cnp7.js";import{d as Te,c as $e}from"./Cr5Iw68y.js";import{u as at}from"./DyClqVU4.js";import{_ as it}from"./DlAUqK2U.js";const se=Ke("/logoLinku.svg"),dt={class:"h-screen bg-background transition-colors duration-300 relative flex flex-col overflow-hidden"},ut={class:"flex-shrink-0 bg-background border-b border-border"},ft={class:"flex items-center h-16 px-4"},pt={class:"flex-1 flex items-center justify-center"},mt={class:"w-full max-w-md px-4"},ct={class:"relative w-full mb-4"},gt={class:"flex items-center justify-between"},vt={class:"flex items-center gap-2"},xt=["src","alt"],bt={class:"text-foreground"},yt={class:"relative w-full mb-6"},ht={class:"absolute top-1/2 -translate-y-1/2 left-3 text-muted-foreground text-sm font-medium pointer-events-none border-r border-border pr-2 mr-2 min-w-[40px] text-left flex items-center h-8",dir:"ltr"},wt={key:0,class:"text-red-500 text-xs mb-4 block min-h-[20px]"},kt={key:1,class:"mb-4 min-h-[20px]"},Ct=["disabled"],It={class:"flex-shrink-0 bg-background border-b border-border"},Et={class:"flex items-center h-14 px-4"},Pt={class:"flex-1 flex items-center justify-center"},jt={class:"w-full max-w-md px-4"},St={class:"w-full mb-6 relative"},Tt={key:0,class:"text-red-500 text-xs mb-4 block min-h-[20px]"},$t={key:1,class:"mb-4 min-h-[20px]"},Dt={class:"flex-shrink-0 bg-background border-b border-border"},Nt={class:"flex items-center h-16 px-4"},Vt={key:0,class:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center"},Lt={class:"flex-1 flex items-center justify-center"},Ut={class:"w-full max-w-md px-4"},Ot={key:0,class:"text-sm text-muted-foreground text-center mb-4"},Rt={key:1,class:"text-sm text-muted-foreground text-center mb-4"},At=["id","value","autofocus","onInput","onKeydown"],zt={class:"timer center flex justify-center py-4 text-sm"},Mt={key:0,class:"text-right"},qt={class:"font-bold inline-block text-foreground",dir:"ltr"},Bt={class:"flex-1 flex items-center justify-center overflow-y-auto"},Ft={class:"w-full max-w-md px-4 py-4"},Wt={class:"relative w-full mb-4"},Gt={class:"relative w-full mb-6"},Kt={class:"flex-1 flex items-center justify-center overflow-y-auto"},Qt={class:"w-full max-w-md px-4 py-4"},Yt={class:"relative w-full mb-4"},Ht={key:0,class:"text-red-500 text-xs mt-1 block"},Jt={class:"relative w-full mb-4"},Xt={class:"flex gap-2 flex-row-reverse"},Zt=["src","alt"],_t={class:"text-sm text-foreground",dir:"ltr"},er={class:"flex-1 relative"},tr={key:0,class:"text-red-500 text-xs mt-1 block"},rr={class:"relative w-full mb-6"},or=["disabled"],sr={key:5,class:"text-xl font-bold text-center text-green-600 flex items-center justify-center gap-2"},lr={class:"px-4 pb-4"},nr={class:"relative mb-4"},ar={class:"max-h-[50vh] overflow-y-auto space-y-1"},ir=["onClick","disabled"],dr=["src","alt"],ur={class:"flex-1 text-right"},fr={class:"text-foreground font-medium"},pr={class:"text-xs text-muted-foreground"},mr={class:"text-muted-foreground text-sm",dir:"ltr"},cr={key:0,class:"ti ti-check text-primary"},gr={key:1,class:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded"},vr={class:"px-4 pb-4"},xr={class:"relative mb-4"},br={class:"max-h-[50vh] overflow-y-auto space-y-1"},yr=["onClick"],hr=["src","alt"],wr={class:"flex-1 text-right"},kr={class:"text-foreground font-medium"},Cr={class:"text-xs text-muted-foreground"},Ir={class:"text-muted-foreground text-sm",dir:"ltr"},Er={key:0,class:"ti ti-check text-primary"},Pr={class:"px-6 py-4 pb-6"},jr={class:"space-y-2"},Sr={key:0,class:"ti ti-check text-primary text-2xl"},ce=4,Tr=Qe({__name:"AuthPage",setup(De){const{isPlatformAuthenticatorAvailable:le,isLoading:ne,authenticateWithPasskey:ae,isPasskeyEnabled:ge}=et(),g=f("phone"),C=f("phone"),T=f(""),L=f(""),M=f("");f("");const q=f(""),ie=f(""),Ne=f("+98"),$=f(Te),D=f(Te),Q=f(!1),Y=f(!1),P=f(""),H=f(""),B=f(""),j=f(""),ve=f(""),xe=f(""),F=f(!1),J=f("fa");te(()=>document.documentElement.classList.contains("dark"));const be=te(()=>{if(!P.value)return $e;const s=P.value.toLowerCase();return $e.filter(e=>e.name.includes(s)||e.nameEn.toLowerCase().includes(s)||e.dialCode.includes(s))});{const s=V.getItem("language");s&&(J.value=s)}const m=Pe({phone:"",email:"",profilePhone:"",profileName:""}),h=Pe(Array(ce).fill(null)),de=f(null),X=f(120),U=f(null),O=f(!1),x=f(!1),R=nt(),A=at(),ue=f(!1),ye=f(""),he=f("ti-alert-triangle"),n=(s,e="ti-lock")=>{ye.value=s,he.value=e,ue.value=!0,setTimeout(()=>ue.value=!1,3e3)},Ve=Ye(),N=He(),w=Ve.$axios,Z=Je();function k(s){const e="Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹",l="Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©";return s.replace(/[Û°-Û¹]/g,r=>String(e.indexOf(r))).replace(/[Ù -Ù©]/g,r=>String(l.indexOf(r)))}function _(s){return s.replace(/[0-9]/g,e=>"Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹"[Number(e)])}function Le(s){const e=s.target,l=e.selectionStart||0;let r=e.value;const a=k(r).replace(/\D/g,"").slice(0,11);let c="";a.length>0&&(a.startsWith("0")?a.length<=4?c=a:a.length<=7?c=a.slice(0,4)+" "+a.slice(4):c=a.slice(0,4)+" "+a.slice(4,7)+" "+a.slice(7):a.length<=3?c=a:a.length<=6?c=a.slice(0,3)+" "+a.slice(3):c=a.slice(0,3)+" "+a.slice(3,6)+" "+a.slice(6));const b=_(c);T.value=b,e.value=b;const G=k(r.slice(0,l)).replace(/\D/g,"").length;let ee=0,fe=0;for(let K=0;K<b.length;K++){if(b[K].match(/[Û°-Û¹]/)&&(fe++,fe>G)){ee=K;break}if(fe===G){ee=K+1;break}}je(()=>{e.setSelectionRange(ee,ee)})}function Ue(s){return _(s.toString())}function W(s=120){U.value&&clearInterval(U.value),X.value=s,O.value=!1,U.value=Ze(()=>{X.value>0?X.value--:(O.value=!0,U.value&&(clearInterval(U.value),U.value=null))},1e3)}async function Oe(){try{O.value=!1;let s=!1;if(C.value==="phone"){const e=k(T.value.trim()).replace(/\D/g,"").replace(/^0/,"");s=await ke(e)}else s=await Ce(L.value.trim());s?(h.fill(null),timerSeconds.value===0&&W(),n("Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù…Ø¬Ø¯Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯","ti-check")):(n("Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle"),O.value=!0)}catch(s){console.error("Error in resendCode:",s),n("Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle"),O.value=!0}}async function we(){try{const s=await ae();if(s.success&&s.userId){const e=V.getItem("passkey_auth_token");if(e){Z.setToken(e),V.setItem("auth_token",e),n("ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ Ø¨Ø§ Face ID","ti-check"),await R.fetchUser();const l=A.defaultCard;N.push("/dashboard")}else n("Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ ÛŒØ§ Ø§ÛŒÙ…ÛŒÙ„ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯","ti-alert-triangle")}else n(s.error||"Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯","ti-alert-triangle")}catch{n("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª","ti-alert-triangle")}}async function Re(){const s=k(T.value.trim()).replace(/\D/g,"");if(m.phone="",C.value="phone",!/^0?9\d{9}$/.test(s)){m.phone="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Û°Û¹ Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯ ÛŒØ§ Û¹ Ùˆ Û±Û± Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯";return}const l=s.startsWith("0")?s.slice(1):s;ve.value=_("98")+l+"+";try{await ke(l)?(g.value="otp",W()):m.phone="Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}catch{m.phone="Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}}async function Ae(){const s=L.value.trim();if(m.email="",C.value="email",!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){m.email="Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯";return}xe.value=s;try{await Ce(s)?(g.value="otp",W()):m.email="Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}catch{m.email="Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."}}async function ke(s){try{const e={phone:k(s),countryCode:"+98"};console.log("ğŸ“± Sending OTP to:",e);const l=await w.post("auth/sendOtpCode",e);return l.data&&l.data.success===!0?!0:(n(l.data.message),!1)}catch(e){const l=e.response?.data;if(l?.code==="code_already_valid"&&l?.remaining_seconds||l?.message&&l.message.includes("Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ù‡Ù†ÙˆØ² Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª")){const r=l?.remaining_seconds?parseInt(l.remaining_seconds):120,p=Math.floor(r/60),i=r%60;return n(`Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ù‡Ù†ÙˆØ² Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª. ${p}:${i.toString().padStart(2,"0")} Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡`,"ti-clock"),g.value="otp",W(r),h.fill(null),!0}return l?.message?n(l.message):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle"),!1}}async function Ce(s){try{const e={email:s};console.log("ğŸ“§ Sending OTP to email:",e);const l=await w.post("auth/sendEmailOtp",e);return l.data&&l.data.success===!0?!0:(n(l.data.message),!1)}catch(e){const l=e.response?.data;if(l?.code==="code_already_valid"&&l?.remaining_seconds||l?.message&&l.message.includes("Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ù‡Ù†ÙˆØ² Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª")){const r=l?.remaining_seconds?parseInt(l.remaining_seconds):120,p=Math.floor(r/60),i=r%60;return n(`Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ù‡Ù†ÙˆØ² Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª. ${p}:${i.toString().padStart(2,"0")} Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡`,"ti-clock"),g.value="otp",W(r),h.fill(null),!0}return l?.message?n(l.message):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle"),!1}}const Ie=()=>h.every(s=>s!==null&&s!=="");async function ze(s,e){const l=e.key;if(!["Backspace","Tab","ArrowLeft","ArrowRight"].includes(l)&&!/^[0-9]$/.test(l)){e.preventDefault();return}if(l==="Backspace"){h[s]=null,s>0&&de.value?.children[s-1]?.focus(),e.preventDefault();return}if(/^[0-9]$/.test(l)&&(h[s]=l,e.preventDefault(),s<ce-1&&de.value?.children[s+1]?.focus(),Ie())){if(x.value)return;x.value=!0;try{const r=k(h.join("")),{success:p,userExists:i}=await Ee(r);if(p)if(i)try{await R.fetchUser(),A.defaultCard||await w.post("v1/cards/createDefaultCard",{defaultContactType:C.value==="email"?"email":"phone"}),N.push("/dashboard")}catch(a){console.error("âŒ Error fetching user after login:",a),N.push("/dashboard")}else g.value!=="email_profile"&&(g.value="register"),x.value=!1;else x.value=!1,n("Ú©Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}catch(r){x.value=!1,r.response&&r.response.data.message?n(r.response.data.message):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ù‚Ø±Ø§Ø±ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle")}}}async function Ee(s){try{let e;if(C.value==="phone"){const r={code:s,phone:k(T.value.trim()).replace(/\D/g,"").replace(/^0/,""),countryCode:"+98"};e=await w.post("/auth/verifyOtpCode",r)}else{const r={code:s,email:L.value.trim()};e=await w.post("/auth/verifyEmailOtp",r)}const l=e.data.token;return typeof l=="string"&&l.length>0?(console.log("âœ… Token received from server:",l.substring(0,20)+"..."),Z.setToken(l),V.setItem("auth_token",l),console.log("âœ… Token saved to safeStorage and store")):console.error("âŒ No token in response:",e.data),e.status===200?{success:!0,userExists:!0}:e.status===201?{success:!0,userExists:!1}:{success:!1,userExists:!1}}catch(e){const l=e.response?.data?.code||e.response?.data?.data?.code,r=e.response?.data?.message||e.response?.data?.data?.message;return l==="profile_required"?(C.value==="email"?(H.value=s,g.value="email_profile"):(B.value=s,g.value="register"),{success:!0,userExists:!1}):(n(r&&l!=="profile_required"?r:"Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ù‚Ø±Ø§Ø±ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle"),{success:!1,userExists:!1})}}async function Me(){if(m.profilePhone="",m.profileName="",!q.value.trim()){m.profileName="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª",n("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");return}const s=q.value.trim().split(" "),e=s[0]||"",l=s.slice(1).join(" ")||"";if(!e||e.trim()===""){m.profileName="Ù†Ø§Ù… Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª",n("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");return}console.log("ğŸ“ Name split:",{fullName:q.value,firstName:e,lastName:l,firstNameLength:e.length,lastNameLength:l.length});let r=null;const p=k(ie.value.trim()).replace(/\D/g,"");if(p){const i=D.value.dialCode.replace("+","");if(r=i+p,i==="972"||r.startsWith("972")){m.profilePhone="Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯",n("Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯","ti-alert-triangle");return}}x.value=!0;try{if(!H.value||H.value.trim()===""){console.error("ğŸ› BUG: pendingEmailOtpCode is empty!"),n("Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ú©Ø¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯.","ti-alert-triangle"),g.value="email";return}const i={code:H.value,email:L.value.trim(),name:e,family:l,phone:r,referred_code:j.value||null};console.log("ğŸ” Sending registration data:",{email:i.email,code:i.code?"****":"MISSING",name:i.name||"EMPTY",family:i.family||"EMPTY",phone:i.phone||"null",referred_code:i.referred_code||"null"});const a=await w.post("/auth/verifyEmailOtp",i);console.log("âœ… Registration successful:",{status:a.status,hasToken:!!a.data.token,hasUser:!!a.data.user});const c=a.data.token;typeof c=="string"&&c.length>0&&(Z.setToken(c),V.setItem("auth_token",c)),n(`Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${e}`,"ti-check");try{await R.fetchUser(),A.defaultCard||await w.post("v1/cards/createDefaultCard",{defaultContactType:"email"})}catch(b){console.error("âŒ Error fetching user after profile submission:",b)}N.push("/dashboard")}catch(i){x.value=!1,console.error("âŒ Registration failed:",{status:i.response?.status,code:i.response?.data?.code,message:i.response?.data?.message,fullError:i.response?.data});const a=i.response?.data?.code;a==="profile_required"?(console.error("ğŸ› BUG: Received profile_required AGAIN after sending profile data!"),n("Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")):a==="phone_taken"?(m.profilePhone="Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª",n("Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª","ti-alert-triangle")):a==="invalid_phone_country"?(m.profilePhone="Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯",n("Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯","ti-alert-triangle")):i.response?.data?.message?n(i.response.data.message,"ti-alert-triangle"):n("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ù‚Ø±Ø§Ø±ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.","ti-alert-triangle")}}async function qe(){if(!M.value.trim()){n("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");return}const s=M.value.trim().split(/\s+/),e=s[0],l=s.slice(1).join(" ")||e;try{if(B.value){const i=l?`${e} ${l}`:e,a={code:B.value,phone:k(T.value.trim()).replace(/\D/g,"").replace(/^0/,""),countryCode:"+98",name:i,referralCode:j.value?.trim()||null};console.log("ğŸ“¤ Sending registration data:",a);const b=(await w.post("/auth/verifyOtpCode",a)).data.token;typeof b=="string"&&b.length>0&&(Z.setToken(b),V.setItem("auth_token",b)),n(`Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${e}`,"ti-check");try{await R.fetchUser(),te(()=>A.defaultCard)?.value||await w.post("v1/cards/createDefaultCard",{defaultContactType:"phone"})}catch(G){console.error("âŒ Error fetching user after phone profile:",G)}B.value="",await N.push("/dashboard");return}const r=await w.post("/user/setReferralCode",{name:e,family:l,referred_code:j.value||null});n(`Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${e}`,"ti-check"),await R.fetchUser(),te(()=>A.defaultCard)?.value||await w.post("v1/cards/createDefaultCard",{defaultContactType:C.value==="email"?"email":"phone"}),await N.push("/dashboard")}catch(r){console.error("Register error:",r),console.error("Error response:",r.response?.data);const p=r.response?.data?.message||r.response?.data?.data?.message;if(r.response?.status===429||p?.includes("Ù…Ù†Ù‚Ø¶ÛŒ")){n("Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ù†ÛŒØ¯.","ti-alert-triangle"),g.value="phone",B.value="",M.value="",j.value="";return}n(p||"Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø«Ø¨Øª Ù†Ø§Ù… Ù¾ÛŒØ´ Ø¢Ù…Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}}const Be=s=>{$.value=s,Q.value=!1,P.value=""},Fe=s=>{if(s.dialCode==="+972"){n("Ø§ÛŒÙ† Ú©Ø´ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯","ti-alert-triangle");return}D.value=s,Ne.value=s.dialCode,Y.value=!1,P.value=""},We=async s=>{J.value=s,V.setItem("language",s),document.documentElement.lang=s,document.documentElement.dir="rtl",setTimeout(()=>{F.value=!1},300)};return Xe(async()=>{if(sessionStorage.getItem("auto_biometric_auth")==="true"&&(sessionStorage.removeItem("auto_biometric_auth"),await je(),le.value&&ge()&&setTimeout(()=>{we()},500)),"OTPCredential"in window&&navigator.credentials){const s=new AbortController;navigator.credentials.get({otp:{transport:["sms"]},signal:s.signal}).then(async e=>{if(e&&"code"in e){const r=e.code.split("");r.forEach((i,a)=>{h[a]=i;const c=document.querySelector(`#otp-input-${a}`);c&&(c.value=i,c.dispatchEvent(new Event("input")))});const p=document.querySelector(`#otp-input-${r.length-1}`);if(p&&p.focus(),Ie()){if(x.value)return;x.value=!0;try{const i=k(h.join("")),{success:a,userExists:c}=await Ee(i);if(a)if(c){try{await R.fetchUser(),A.defaultCard||await w.post("v1/cards/createDefaultCard",{defaultContactType:C.value==="email"?"email":"phone"})}catch(b){console.error("âŒ Error fetching user after OTP verification:",b)}N.push("/dashboard")}else g.value="register",x.value=!1;else x.value=!1,n("Ú©Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}catch{x.value=!1,n("Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.","ti-alert-triangle")}}}}).catch(e=>{})}}),(s,e)=>{const l=Ge;return d(),u(y,null,[t("div",dt,[g.value==="phone"?(d(),u(y,{key:0},[t("div",ut,[t("div",ft,[e[20]||(e[20]=t("div",{class:"flex items-center gap-2"},[t("img",{src:se,alt:"Linku Logo",class:"h-8 w-auto dark:brightness-0 dark:invert"})],-1)),e[21]||(e[21]=o()),e[22]||(e[22]=t("div",{class:"flex-1"},null,-1)),e[23]||(e[23]=o()),t("button",{onClick:e[0]||(e[0]=r=>F.value=!0),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[19]||(e[19]=[t("i",{class:"ti ti-language text-foreground text-xl"},null,-1)])])])]),e[49]||(e[49]=o()),t("div",pt,[t("div",mt,[e[40]||(e[40]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ù„Ø·ÙØ§Ù‹ Ú©Ø´ÙˆØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ùˆ Ø³Ù¾Ø³ Ø´Ù…Ø§Ø±Ù‡ Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",-1)),e[41]||(e[41]=o()),t("div",ct,[t("button",{onClick:e[1]||(e[1]=r=>Q.value=!0),class:"block px-3 pb-2.5 pt-4 w-full text-sm text-foreground bg-transparent rounded-xl border-2 border-border appearance-none focus:outline-none focus:ring-0 hover:border-primary peer transition-colors duration-200 text-right"},[t("div",gt,[t("div",vt,[t("img",{src:`/flag/${$.value.flag}.svg`,alt:$.value.nameEn,class:"w-6 h-4 object-cover rounded"},null,8,xt),e[24]||(e[24]=o()),t("span",bt,v($.value.name),1)]),e[25]||(e[25]=o()),e[26]||(e[26]=t("i",{class:"ti ti-chevron-down text-muted-foreground"},null,-1))])]),e[27]||(e[27]=o()),e[28]||(e[28]=t("label",{class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 right-2 origin-top-right pointer-events-none"},[t("i",{class:"ti ti-world w-4 h-4 ml-1.5"}),o(),t("span",null,"Ú©Ø´ÙˆØ±")],-1))]),e[42]||(e[42]=o()),t("div",yt,[I(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>T.value=r),onInput:Le,id:"phoneInput",type:"text",inputmode:"numeric",placeholder:" ",dir:"ltr",class:z(["block px-3 pb-2.5 pt-4 w-full text-sm text-foreground bg-transparent rounded-xl border-2 appearance-none focus:outline-none focus:ring-0 peer transition-colors duration-200 pl-16",m.phone?"border-red-500":"border-border focus:border-primary"])},null,34),[[E,T.value]]),e[30]||(e[30]=o()),t("label",{for:"phoneInput",class:z(["inline-flex items-center absolute text-sm duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 right-2 origin-top-right pointer-events-none",m.phone?"text-red-500":"text-muted-foreground peer-focus:text-primary"])},[...e[29]||(e[29]=[t("i",{class:"ti ti-phone w-4 h-4 ml-1.5"},null,-1),o(),t("span",null,"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„",-1)])],2),e[31]||(e[31]=o()),t("div",ht,v($.value.dialCode),1)]),e[43]||(e[43]=o()),m.phone?(d(),u("p",wt,v(m.phone),1)):(d(),u("div",kt)),e[44]||(e[44]=o()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:Re},[...e[32]||(e[32]=[t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1),o(),t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1),o(),t("span",null,"Ø§Ø¯Ø§Ù…Ù‡",-1)])]),e[45]||(e[45]=o()),e[46]||(e[46]=t("div",{class:"flex items-center gap-3 my-6"},[t("div",{class:"flex-1 h-px bg-border"}),o(),t("span",{class:"text-muted-foreground text-sm"},"ÛŒØ§"),o(),t("div",{class:"flex-1 h-px bg-border"})],-1)),e[47]||(e[47]=o()),oe(le)&&oe(ge)()?(d(),u("button",{key:2,class:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5 mb-3",onClick:we,disabled:oe(ne)},[oe(ne)?(d(),u(y,{key:0},[e[33]||(e[33]=t("div",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin ml-2"},null,-1)),e[34]||(e[34]=o()),e[35]||(e[35]=t("span",null,"Ø¯Ø± Ø­Ø§Ù„ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª...",-1))],64)):(d(),u(y,{key:1},[e[36]||(e[36]=t("i",{class:"ti ti-face-id text-xl ml-2"},null,-1)),e[37]||(e[37]=o()),e[38]||(e[38]=t("span",null,"ÙˆØ±ÙˆØ¯ Ø¨Ø§ Face ID / Touch ID",-1))],64))],8,Ct)):S("",!0),e[48]||(e[48]=o()),t("button",{class:"w-full bg-card border border-border text-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:bg-muted hover:-translate-y-0.5",onClick:e[3]||(e[3]=r=>g.value="email")},[...e[39]||(e[39]=[t("i",{class:"ti ti-mail text-xl ml-2"},null,-1),o(),t("span",null,"ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø§ÛŒÙ…ÛŒÙ„",-1)])])])])],64)):g.value==="email"?(d(),u(y,{key:1},[t("div",It,[t("div",Et,[t("button",{onClick:e[4]||(e[4]=r=>g.value="phone"),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[50]||(e[50]=[t("i",{class:"ti ti-arrow-right rtl:block ltr:hidden text-foreground text-xl"},null,-1),o(),t("i",{class:"ti ti-arrow-left ltr:block rtl:hidden text-foreground text-xl"},null,-1)])]),e[51]||(e[51]=o()),e[52]||(e[52]=t("h1",{class:"text-lg font-semibold text-foreground mr-2"},"Ø§ÛŒÙ…ÛŒÙ„",-1))])]),e[60]||(e[60]=o()),t("div",Pt,[t("div",jt,[e[56]||(e[56]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ø¢Ø¯Ø±Ø³ Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",-1)),e[57]||(e[57]=o()),t("div",St,[I(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>L.value=r),id:"emailInput",type:"email",inputmode:"email",placeholder:" ",dir:"ltr",class:"peer block w-full px-4 py-4 text-sm border border-border rounded-lg focus:outline-none focus:ring-0 focus:border-primary text-foreground bg-card transition-all duration-300"},null,512),[[E,L.value]]),e[53]||(e[53]=o()),e[54]||(e[54]=t("label",{for:"emailInput",class:"absolute rtl:right-4 ltr:left-4 text-sm text-muted-foreground bg-background px-1 z-10 transition-all duration-200 cursor-text top-1/2 -translate-y-1/2 peer-focus:top-1 peer-focus:text-xs peer-focus:-translate-y-1/2 peer-focus:text-primary peer-[:not(:placeholder-shown)]:top-1 peer-[:not(:placeholder-shown)]:text-xs peer-[:not(:placeholder-shown)]:-translate-y-1/2"},`\r
            Ø§ÛŒÙ…ÛŒÙ„\r
          `,-1))]),e[58]||(e[58]=o()),m.email?(d(),u("p",Tt,v(m.email),1)):(d(),u("div",$t)),e[59]||(e[59]=o()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:Ae},[...e[55]||(e[55]=[t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1),o(),t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1),o(),t("span",null,"Ø§Ø¯Ø§Ù…Ù‡",-1)])])])])],64)):g.value==="otp"?(d(),u(y,{key:2},[t("div",Dt,[t("div",Nt,[e[62]||(e[62]=t("div",{class:"flex items-center gap-2"},[t("img",{src:se,alt:"Linku Logo",class:"h-8 w-auto dark:brightness-0 dark:invert"})],-1)),e[63]||(e[63]=o()),e[64]||(e[64]=t("div",{class:"flex-1"},null,-1)),e[65]||(e[65]=o()),t("button",{onClick:e[6]||(e[6]=r=>F.value=!0),class:"w-10 h-10 flex items-center justify-center hover:bg-accent transition-colors rounded-full"},[...e[61]||(e[61]=[t("i",{class:"ti ti-language text-foreground text-xl"},null,-1)])])])]),e[71]||(e[71]=o()),x.value?(d(),u("div",Vt,[...e[66]||(e[66]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),o(),t("p",{class:"text-foreground font-medium"},"Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...")],-1)])])):S("",!0),e[72]||(e[72]=o()),t("div",Lt,[t("div",Ut,[C.value==="phone"?(d(),u("p",Ot,`Ù„Ø·ÙØ§ Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„\r
              `+v(_(ve.value))+` Ø±Ø§ ÙˆØ§Ø±Ø¯\r
              Ú©Ù†ÛŒØ¯`,1)):(d(),u("p",Rt,`Ù„Ø·ÙØ§ Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„\r
              `+v(xe.value)+` Ø±Ø§ ÙˆØ§Ø±Ø¯\r
              Ú©Ù†ÛŒØ¯`,1)),e[69]||(e[69]=o()),t("div",{ref_key:"otpCont",ref:de,class:"flex justify-center gap-2 mt-6 ltr"},[(d(),u(y,null,pe(ce,(r,p)=>t("input",{key:p,id:`otp-input-${p}`,type:"text",class:z(["p-4 w-14 h-14 border border-border rounded-lg bg-card text-center text-xl text-foreground flex items-center justify-center font-semibold ltr focus:outline-none focus:border-primary focus:bg-background transition-all duration-300",{bounce:h[p]!==null}]),value:h[p],maxlength:"1",placeholder:"-",inputmode:"numeric",autocomplete:"one-time-code",autofocus:p===0,onInput:i=>h[p]=i.target?.value||null,onKeydown:i=>ze(p,i)},null,42,At)),64))],512),e[70]||(e[70]=o()),t("div",zt,[O.value?(d(),u("button",{key:1,class:"text-primary underline hover:opacity-80 transition-opacity",onClick:Oe},`\r
              Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø¯\r
            `)):(d(),u("div",Mt,[t("span",qt,v(Ue(X.value)),1),e[67]||(e[67]=o()),e[68]||(e[68]=t("strong",{class:"mr-2 text-muted-foreground"},"Ø«Ø§Ù†ÛŒÙ‡ Ù…Ø§Ù†Ø¯Ù‡ ØªØ§ Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø¯",-1))]))])])])],64)):g.value==="register"?(d(),u(y,{key:3},[e[82]||(e[82]=Se('<div class="flex-shrink-0 bg-background border-b border-border" data-v-aaddfd6a><div class="flex items-center h-16 px-4" data-v-aaddfd6a><div class="flex items-center gap-2" data-v-aaddfd6a><img src="'+se+'" alt="Linku Logo" class="h-8 w-auto dark:brightness-0 dark:invert" data-v-aaddfd6a></div> <div class="flex-1" data-v-aaddfd6a></div></div></div> ',2)),t("div",Bt,[t("div",Ft,[e[78]||(e[78]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯",-1)),e[79]||(e[79]=o()),t("div",Wt,[I(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>M.value=r),id:"nameInput",type:"text",placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,M.value]]),e[73]||(e[73]=o()),e[74]||(e[74]=t("label",{for:"nameInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-user w-4 h-4 ml-1.5"}),o(),t("span",null,"Ù†Ø§Ù… Ú©Ø§Ù…Ù„")],-1))]),e[80]||(e[80]=o()),t("div",Gt,[I(t("input",{type:"text",id:"referralInput","onUpdate:modelValue":e[8]||(e[8]=r=>j.value=r),placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,j.value]]),e[75]||(e[75]=o()),e[76]||(e[76]=t("label",{for:"referralInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-gift w-4 h-4 ml-1.5"}),o(),t("span",null,"Ú©Ø¯ Ù…Ø¹Ø±Ù (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)")],-1))]),e[81]||(e[81]=o()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:qe},[...e[77]||(e[77]=[t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1),o(),t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1),o(),t("span",null,"Ø«Ø¨Øª Ùˆ ÙˆØ±ÙˆØ¯",-1)])])])])],64)):g.value==="email_profile"?(d(),u(y,{key:4},[e[108]||(e[108]=Se('<div class="sticky top-0 z-50 flex-shrink-0 bg-background border-b border-border" data-v-aaddfd6a><div class="flex items-center h-16 px-4" data-v-aaddfd6a><div class="flex items-center gap-2" data-v-aaddfd6a><img src="'+se+'" alt="Linku Logo" class="h-8 w-auto dark:brightness-0 dark:invert" data-v-aaddfd6a></div> <div class="flex-1" data-v-aaddfd6a></div></div></div> ',2)),t("div",Kt,[t("div",Qt,[e[103]||(e[103]=t("p",{class:"text-muted-foreground text-sm text-center mb-8"},"Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯",-1)),e[104]||(e[104]=o()),t("div",Yt,[I(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>q.value=r),id:"profileFullNameInput",type:"text",placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,q.value]]),e[83]||(e[83]=o()),e[84]||(e[84]=t("label",{for:"profileFullNameInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-user w-4 h-4 ml-1.5"}),o(),t("span",null,"Ù†Ø§Ù… Ú©Ø§Ù…Ù„")],-1)),e[85]||(e[85]=o()),m.profileName?(d(),u("p",Ht,v(m.profileName),1)):S("",!0)]),e[105]||(e[105]=o()),t("div",Jt,[t("div",Xt,[t("button",{onClick:e[10]||(e[10]=r=>Y.value=!0),class:"flex items-center gap-2 px-3 py-4 border-2 border-border rounded-xl bg-transparent hover:border-primary transition-all duration-300"},[t("img",{src:`/flag/${D.value.flag}.svg`,alt:D.value.nameEn,class:"w-6 h-4 object-cover rounded"},null,8,Zt),e[86]||(e[86]=o()),t("span",_t,v(D.value.dialCode),1),e[87]||(e[87]=o()),e[88]||(e[88]=t("i",{class:"ti ti-chevron-down text-muted-foreground text-sm"},null,-1))]),e[91]||(e[91]=o()),t("div",er,[I(t("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>ie.value=r),id:"profilePhoneInput",type:"text",inputmode:"numeric",placeholder:" ",dir:"ltr",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300 text-left"},null,512),[[E,ie.value]]),e[89]||(e[89]=o()),e[90]||(e[90]=t("label",{for:"profilePhoneInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-phone w-4 h-4 ml-1.5"}),o(),t("span",null,"Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)")],-1))])]),e[92]||(e[92]=o()),m.profilePhone?(d(),u("p",tr,v(m.profilePhone),1)):S("",!0)]),e[106]||(e[106]=o()),t("div",rr,[I(t("input",{"onUpdate:modelValue":e[12]||(e[12]=r=>j.value=r),id:"profileReferralInput",type:"text",placeholder:" ",class:"peer block w-full px-3 pb-2.5 pt-4 text-sm text-foreground bg-transparent rounded-xl border-2 border-border focus:outline-none focus:ring-0 focus:border-primary transition-all duration-300"},null,512),[[E,j.value]]),e[93]||(e[93]=o()),e[94]||(e[94]=t("label",{for:"profileReferralInput",class:"inline-flex items-center absolute text-sm text-muted-foreground duration-300 transform -translate-y-4 scale-[0.85] top-2 z-10 bg-background px-2 peer-focus:px-2 peer-focus:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-[0.85] peer-focus:-translate-y-4 right-2 origin-top-right"},[t("i",{class:"ti ti-gift w-4 h-4 ml-1.5"}),o(),t("span",null,"Ú©Ø¯ Ù…Ø¹Ø±Ù (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)")],-1))]),e[107]||(e[107]=o()),t("button",{class:"w-full bg-primary text-primary-foreground text-center py-4 rounded-lg text-lg font-medium relative flex items-center justify-center overflow-hidden transition-all duration-300 hover:opacity-90 hover:-translate-y-0.5",onClick:Me,disabled:x.value},[x.value?(d(),u(y,{key:0},[e[95]||(e[95]=t("div",{class:"w-5 h-5 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin ml-2"},null,-1)),e[96]||(e[96]=o()),e[97]||(e[97]=t("span",null,"Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...",-1))],64)):(d(),u(y,{key:1},[e[98]||(e[98]=t("i",{class:"ti ti-chevron-left w-4 rtl:mr-auto ltr:ml-auto absolute rtl:left-4 ltr:right-4 pt-1 text-2xl rtl:border-r ltr:border-l px-4 border-primary-foreground/30 ltr:hidden"},null,-1)),e[99]||(e[99]=o()),e[100]||(e[100]=t("i",{class:"ti ti-chevron-right w-4 ltr:ml-auto absolute ltr:right-4 pt-1 text-2xl ltr:border-l px-4 border-primary-foreground/30 rtl:hidden"},null,-1)),e[101]||(e[101]=o()),e[102]||(e[102]=t("span",null,"Ø«Ø¨Øª Ùˆ ÙˆØ±ÙˆØ¯",-1))],64))],8,or)])])],64)):g.value==="done"?(d(),u("h2",sr,[...e[109]||(e[109]=[t("i",{class:"ti ti-check"},null,-1),o(` ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚\r
        `,-1)])])):S("",!0)]),e[132]||(e[132]=o()),re(l,{modelValue:Q.value,"onUpdate:modelValue":e[14]||(e[14]=r=>Q.value=r),title:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø´ÙˆØ±",size:"lg","desktop-width":"2xl",closable:!0,"close-on-backdrop":!0},{default:me(()=>[t("div",lr,[t("div",nr,[e[110]||(e[110]=t("i",{class:"ti ti-search absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"},null,-1)),e[111]||(e[111]=o()),I(t("input",{"onUpdate:modelValue":e[13]||(e[13]=r=>P.value=r),type:"text",placeholder:"Ø¬Ø³ØªØ¬Ùˆ Ú©Ø´ÙˆØ±...",class:"w-full pr-10 pl-4 py-3 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:border-primary"},null,512),[[E,P.value]])]),e[116]||(e[116]=o()),t("div",ar,[(d(!0),u(y,null,pe(be.value,r=>(d(),u("button",{key:r.code,onClick:p=>r.code==="IR"?Be(r):null,disabled:r.code!=="IR",class:z(["w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all",$.value.code===r.code?"bg-primary/10 border border-primary":r.code==="IR"?"hover:bg-accent cursor-pointer":"opacity-50 cursor-not-allowed"])},[t("img",{src:`/flag/${r.flag}.svg`,alt:r.nameEn,class:"w-7 h-5 object-cover rounded"},null,8,dr),e[113]||(e[113]=o()),t("div",ur,[t("div",fr,v(r.name),1),e[112]||(e[112]=o()),t("div",pr,v(r.nameEn),1)]),e[114]||(e[114]=o()),t("span",mr,v(r.dialCode),1),e[115]||(e[115]=o()),r.code==="IR"?(d(),u(y,{key:0},[$.value.code===r.code?(d(),u("i",cr)):S("",!0)],64)):(d(),u("span",gr,"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ"))],10,ir))),128))])])]),_:1},8,["modelValue"]),e[133]||(e[133]=o()),re(l,{modelValue:Y.value,"onUpdate:modelValue":e[16]||(e[16]=r=>Y.value=r),title:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø´ÙˆØ±",size:"lg","desktop-width":"2xl",closable:!0,"close-on-backdrop":!0},{default:me(()=>[t("div",vr,[t("div",xr,[e[117]||(e[117]=t("i",{class:"ti ti-search absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"},null,-1)),e[118]||(e[118]=o()),I(t("input",{"onUpdate:modelValue":e[15]||(e[15]=r=>P.value=r),type:"text",placeholder:"Ø¬Ø³ØªØ¬Ùˆ Ú©Ø´ÙˆØ±...",class:"w-full pr-10 pl-4 py-3 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:border-primary"},null,512),[[E,P.value]])]),e[123]||(e[123]=o()),t("div",br,[(d(!0),u(y,null,pe(be.value,r=>(d(),u("button",{key:r.code,onClick:p=>Fe(r),class:z(["w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all",D.value.code===r.code?"bg-primary/10 border border-primary":"hover:bg-accent"])},[t("img",{src:`/flag/${r.flag}.svg`,alt:r.nameEn,class:"w-7 h-5 object-cover rounded"},null,8,hr),e[120]||(e[120]=o()),t("div",wr,[t("div",kr,v(r.name),1),e[119]||(e[119]=o()),t("div",Cr,v(r.nameEn),1)]),e[121]||(e[121]=o()),t("span",Ir,v(r.dialCode),1),e[122]||(e[122]=o()),D.value.code===r.code?(d(),u("i",Er)):S("",!0)],10,yr))),128))])])]),_:1},8,["modelValue"]),e[134]||(e[134]=o()),re(l,{modelValue:F.value,"onUpdate:modelValue":e[18]||(e[18]=r=>F.value=r),title:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø²Ø¨Ø§Ù†",size:"auto","desktop-width":"lg",closable:!0,"close-on-backdrop":!0},{default:me(()=>[t("div",Pr,[t("div",jr,[t("button",{onClick:e[17]||(e[17]=r=>We("fa")),class:z(["w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200",J.value==="fa"?"border-primary bg-primary/5 shadow-sm":"border-border bg-card hover:border-primary/50 hover:bg-accent"])},[e[124]||(e[124]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:tt,alt:"Iran",class:"w-7 h-5 object-cover"})]),o(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"ÙØ§Ø±Ø³ÛŒ"),o(),t("div",{class:"text-xs text-muted-foreground"},"Persian")])],-1)),e[125]||(e[125]=o()),J.value==="fa"?(d(),u("i",Sr)):S("",!0)],2),e[126]||(e[126]=o()),e[127]||(e[127]=t("button",{disabled:"",class:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all opacity-50 cursor-not-allowed border-border bg-muted/30"},[t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:rt,alt:"USA",class:"w-7 h-5 object-cover"})]),o(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"English"),o(),t("div",{class:"text-xs text-muted-foreground"},"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ")])]),o(),t("div",{class:"px-2 py-1 bg-muted rounded text-xs text-muted-foreground"},"Ù‚ÙÙ„")],-1)),e[128]||(e[128]=o()),e[129]||(e[129]=t("button",{disabled:"",class:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all opacity-50 cursor-not-allowed border-border bg-muted/30"},[t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-yellow-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:ot,alt:"Saudi Arabia",class:"w-7 h-5 object-cover"})]),o(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"),o(),t("div",{class:"text-xs text-muted-foreground"},"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ")])])],-1)),e[130]||(e[130]=o()),e[131]||(e[131]=t("button",{disabled:"",class:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all opacity-50 cursor-not-allowed border-border bg-muted/30"},[t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center overflow-hidden"},[t("img",{src:st,alt:"Turkey",class:"w-7 h-5 object-cover"})]),o(),t("div",{class:"text-right"},[t("div",{class:"font-semibold text-foreground"},"TÃ¼rkÃ§e"),o(),t("div",{class:"text-xs text-muted-foreground"},"Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ")])])],-1))])])]),_:1},8,["modelValue"]),e[135]||(e[135]=o()),re(lt,{visible:ue.value,message:ye.value,icon:he.value},null,8,["visible","message","icon"])],64)}}}),$r=it(Tr,[["__scopeId","data-v-aaddfd6a"]]),zr={__name:"login",setup(De){return(le,ne)=>{const ae=$r;return d(),_e(ae)}}};export{zr as default};
