import{k as T,r as c,c as R,o as S,b as l,f as t,e as s,d as u,t as n,O as m,N as $,P as M,Q as N,z,x as I,i}from"#entry";import{u as P}from"./S2fq3tuq.js";import{u as A}from"./DVjSPpAI.js";const B={class:"min-h-screen bg-background"},E={class:"fixed top-0 left-0 right-0 z-40 bg-card border-b border-border"},F={class:"flex items-center h-14 px-4"},L={class:"pt-16 pb-8"},V={key:0,class:"max-w-2xl mx-auto px-4 space-y-4 animate-pulse"},O={key:1,class:"max-w-2xl mx-auto px-4 space-y-4"},Q={key:0,class:"w-full rounded-2xl overflow-hidden border border-border"},q=["src","alt"],G={class:"bg-card border border-border rounded-2xl p-6 space-y-6"},H={class:"flex items-start gap-4"},J={class:"w-16 h-16 rounded-xl flex items-center justify-center border border-border overflow-hidden flex-shrink-0 bg-primary/5"},K=["src","alt"],U={key:1,class:"ti ti-discount text-primary text-3xl"},W={class:"flex-1 space-y-2"},X={class:"flex items-start justify-between gap-2"},Y={class:"text-xl font-bold text-foreground"},Z={class:"text-muted-foreground text-sm"},_={class:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-6 text-center border border-primary/20"},h={class:"text-4xl font-bold text-primary mb-2"},ee={class:"space-y-3"},te={class:"flex items-center gap-3"},se={class:"flex-1 bg-muted border border-border rounded-xl px-4 py-3 font-mono text-lg text-center text-foreground"},re=["disabled"],oe={class:"bg-card border border-border rounded-2xl p-6 space-y-4"},ne={class:"space-y-3"},le={class:"flex items-center justify-between py-3 border-b border-border"},ie={class:"text-foreground font-medium"},de={key:0,class:"flex items-center justify-between py-3 border-b border-border"},ae={key:1,class:"flex items-center justify-between py-3 border-b border-border"},ue={class:"text-foreground font-medium"},xe={key:2,class:"flex items-center justify-between py-3 border-b border-border"},me={class:"text-foreground font-medium"},fe={key:3,class:"flex items-center justify-between py-3 border-b border-border"},pe={class:"text-foreground font-medium"},be={class:"flex items-center justify-between py-3"},ge={class:"text-foreground font-medium"},ve={key:1,class:"bg-card border border-border rounded-2xl p-6"},ye={class:"flex items-center justify-between mb-3"},ce={class:"text-sm font-medium text-primary"},we={class:"w-full bg-muted rounded-full h-3 overflow-hidden"},ke={class:"text-xs text-muted-foreground mt-2 text-center"},De={key:2,class:"bg-card border border-border rounded-2xl p-6"},je={class:"space-y-2"},Ce={key:2,class:"max-w-2xl mx-auto px-4 text-center py-12"},Me=T({__name:"[id]",setup(Te){const w=z();I();const f=P(),b=A(),g=c(!0),d=c(!1),r=R(()=>{const o=w.params.id;return f.rewards.find(e=>String(e.id)===String(o)||e.code===o)});S(async()=>{try{f.rewards.length===0&&await f.fetchRewards()}catch(o){console.error("Error loading discount:",o)}finally{g.value=!1}});const k=async()=>{if(r.value){d.value=!0;try{if(navigator.clipboard)await navigator.clipboard.writeText(r.value.code);else{const o=document.createElement("textarea");o.value=r.value.code,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select(),document.execCommand("copy"),document.body.removeChild(o)}b.success(`کد ${r.value.code} کپی شد`),setTimeout(()=>{d.value=!1},2e3)}catch{b.error("امکان کپی کردن کد تخفیف وجود ندارد"),d.value=!1}}},D=o=>{const e=new Date(o);return new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric"}).format(e)},v=o=>new Intl.NumberFormat("fa-IR").format(o),x=o=>{const e=new Date,p=new Date(o).getTime()-e.getTime();return Math.ceil(p/(1e3*3600*24))},y=o=>{const a=x(o);return a<=0?0:Math.max(0,Math.min(100,a/30*100))},j=o=>{switch(o){case"active":return"bg-green-500/10 text-green-600 border border-green-500/20";case"expired":return"bg-orange-500/10 text-orange-600 border border-orange-500/20";case"used":return"bg-gray-500/10 text-gray-600 border border-gray-500/20";default:return"bg-gray-500/10 text-gray-600"}},C=o=>{switch(o){case"active":return"فعال";case"expired":return"منقضی شده";case"used":return"استفاده شده";default:return"نامشخص"}};return(o,e)=>(i(),l("div",B,[t("div",E,[t("div",F,[t("button",{onClick:e[0]||(e[0]=a=>o.$router.back()),class:"flex items-center justify-center w-10 h-10 rounded-lg text-foreground hover:bg-accent transition-colors"},[...e[2]||(e[2]=[t("i",{class:"ti ti-arrow-right text-xl"},null,-1)])]),e[3]||(e[3]=s()),e[4]||(e[4]=t("h1",{class:"flex-1 text-lg font-semibold text-foreground"},"جزئیات کد تخفیف",-1))])]),e[53]||(e[53]=s()),t("div",L,[g.value?(i(),l("div",V,[...e[5]||(e[5]=[t("div",{class:"h-48 bg-accent rounded-2xl"},null,-1),s(),t("div",{class:"h-32 bg-accent rounded-2xl"},null,-1),s(),t("div",{class:"h-48 bg-accent rounded-2xl"},null,-1)])])):r.value?(i(),l("div",O,[r.value.banner?(i(),l("div",Q,[t("img",{src:r.value.banner,alt:r.value.title,class:"w-full h-48 object-cover"},null,8,q)])):u("",!0),e[43]||(e[43]=s()),t("div",G,[t("div",H,[t("div",J,[r.value.image?(i(),l("img",{key:0,src:r.value.image,alt:r.value.title,class:"w-full h-full object-cover"},null,8,K)):(i(),l("i",U))]),e[8]||(e[8]=s()),t("div",W,[t("div",X,[t("h2",Y,n(r.value.title),1),e[6]||(e[6]=s()),t("span",{class:m(["text-xs px-3 py-1.5 rounded-full font-medium whitespace-nowrap",j(r.value.status)])},n(C(r.value.status)),3)]),e[7]||(e[7]=s()),t("p",Z,n(r.value.description),1)])]),e[14]||(e[14]=s()),t("div",_,[t("div",h,n(r.value.value)+n(r.value.type==="percentage"?"%":" تومان"),1),e[9]||(e[9]=s()),e[10]||(e[10]=t("p",{class:"text-sm text-muted-foreground"},"مقدار تخفیف",-1))]),e[15]||(e[15]=s()),t("div",ee,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-foreground"},"کد تخفیف",-1)),e[13]||(e[13]=s()),t("div",te,[t("div",se,n(r.value.code),1),e[11]||(e[11]=s()),t("button",{onClick:k,disabled:d.value,class:m(["px-6 py-3 rounded-xl font-medium transition-all flex items-center gap-2",d.value?"bg-green-500/10 text-green-600 border border-green-500/20":"bg-primary text-primary-foreground hover:bg-primary/90"])},[t("i",{class:m(d.value?"ti ti-check":"ti ti-copy")},null,2),s(" "+n(d.value?"کپی شد":"کپی"),1)],10,re)])])]),e[44]||(e[44]=s()),t("div",oe,[e[33]||(e[33]=t("h3",{class:"text-lg font-semibold text-foreground mb-4"},"جزئیات",-1)),e[34]||(e[34]=s()),t("div",ne,[t("div",le,[e[16]||(e[16]=t("div",{class:"flex items-center gap-3 text-muted-foreground"},[t("i",{class:"ti ti-calendar text-xl"}),s(),t("span",null,"تاریخ انقضا")],-1)),e[17]||(e[17]=s()),t("span",ie,n(D(r.value.expiryDate)),1)]),e[28]||(e[28]=s()),r.value.status==="active"?(i(),l("div",de,[e[18]||(e[18]=t("div",{class:"flex items-center gap-3 text-muted-foreground"},[t("i",{class:"ti ti-clock text-xl"}),s(),t("span",null,"زمان باقی‌مانده")],-1)),e[19]||(e[19]=s()),t("span",{class:m(["font-medium",x(r.value.expiryDate)<=3?"text-red-500":"text-green-600"])},n(x(r.value.expiryDate))+` روز\r
              `,3)])):u("",!0),e[29]||(e[29]=s()),r.value.minAmount?(i(),l("div",ae,[e[20]||(e[20]=t("div",{class:"flex items-center gap-3 text-muted-foreground"},[t("i",{class:"ti ti-coins text-xl"}),s(),t("span",null,"حداقل مبلغ خرید")],-1)),e[21]||(e[21]=s()),t("span",ue,n(v(r.value.minAmount))+" تومان",1)])):u("",!0),e[30]||(e[30]=s()),r.value.maxDiscount?(i(),l("div",xe,[e[22]||(e[22]=t("div",{class:"flex items-center gap-3 text-muted-foreground"},[t("i",{class:"ti ti-circle-dashed text-xl"}),s(),t("span",null,"حداکثر تخفیف")],-1)),e[23]||(e[23]=s()),t("span",me,n(v(r.value.maxDiscount))+" تومان",1)])):u("",!0),e[31]||(e[31]=s()),r.value.usageLimit?(i(),l("div",fe,[e[24]||(e[24]=t("div",{class:"flex items-center gap-3 text-muted-foreground"},[t("i",{class:"ti ti-repeat text-xl"}),s(),t("span",null,"تعداد استفاده")],-1)),e[25]||(e[25]=s()),t("span",pe,n(r.value.usageCount||0)+" از "+n(r.value.usageLimit),1)])):u("",!0),e[32]||(e[32]=s()),t("div",be,[e[26]||(e[26]=t("div",{class:"flex items-center gap-3 text-muted-foreground"},[t("i",{class:"ti ti-tag text-xl"}),s(),t("span",null,"نوع تخفیف")],-1)),e[27]||(e[27]=s()),t("span",ge,n(r.value.type==="percentage"?"درصدی":"مبلغ ثابت"),1)])])]),e[45]||(e[45]=s()),r.value.status==="active"&&x(r.value.expiryDate)<=7?(i(),l("div",ve,[t("div",ye,[e[35]||(e[35]=t("span",{class:"text-sm font-medium text-foreground"},"پیشرفت زمان",-1)),e[36]||(e[36]=s()),t("span",ce,n(Math.round(y(r.value.expiryDate)))+`%\r
            `,1)]),e[37]||(e[37]=s()),t("div",we,[t("div",{class:"bg-gradient-to-r from-primary to-primary/60 h-3 rounded-full transition-all duration-300",style:$({width:`${y(r.value.expiryDate)}%`})},null,4)]),e[38]||(e[38]=s()),t("p",ke,n(x(r.value.expiryDate))+` روز تا انقضا\r
          `,1)])):u("",!0),e[46]||(e[46]=s()),r.value.appliesTo&&r.value.appliesTo.length>0?(i(),l("div",De,[e[41]||(e[41]=t("h3",{class:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2"},[t("i",{class:"ti ti-list-check"}),s(`\r
            شرایط استفاده\r
          `)],-1)),e[42]||(e[42]=s()),t("ul",je,[(i(!0),l(M,null,N(r.value.appliesTo,(a,p)=>(i(),l("li",{key:p,class:"flex items-start gap-3 text-sm text-muted-foreground"},[e[39]||(e[39]=t("i",{class:"ti ti-circle-check text-green-500 text-base mt-0.5 flex-shrink-0"},null,-1)),e[40]||(e[40]=s()),t("span",null,n(a),1)]))),128))])])):u("",!0)])):(i(),l("div",Ce,[e[47]||(e[47]=t("div",{class:"w-20 h-20 mx-auto mb-4 rounded-full bg-red-500/10 flex items-center justify-center"},[t("i",{class:"ti ti-alert-circle text-red-500 text-4xl"})],-1)),e[48]||(e[48]=s()),e[49]||(e[49]=t("h3",{class:"text-xl font-semibold text-foreground mb-2"},"کد تخفیف یافت نشد",-1)),e[50]||(e[50]=s()),e[51]||(e[51]=t("p",{class:"text-muted-foreground mb-6"},"این کد تخفیف حذف شده یا وجود ندارد",-1)),e[52]||(e[52]=s()),t("button",{onClick:e[1]||(e[1]=a=>o.$router.back()),class:"px-6 py-3 bg-primary text-primary-foreground rounded-xl font-medium hover:bg-primary/90 transition-colors"},`\r
          بازگشت به لیست تخفیف‌ها\r
        `)]))])]))}});export{Me as default};
